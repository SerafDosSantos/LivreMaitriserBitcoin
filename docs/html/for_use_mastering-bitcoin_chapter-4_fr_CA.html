<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<title>Cl√©s et adresses</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
</div>
<div id="content">
<div class="sect1">
<h2 id="ch04_keys_addresses">Cl√©s et adresses</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Vous avez peut-√™tre entendu dire que le bitcoin est bas√© sur la <em>cryptographie</em>, qui est une branche des math√©matiques largement utilis√©e en s√©curit√© informatique. La cryptographie signifie "√©criture secr√®te" en grec, mais la science de la cryptographie englobe plus que la simple √©criture secr√®te, appel√©e cryptage. La cryptographie peut √©galement √™tre utilis√©e pour prouver la connaissance d&#8217;un secret sans r√©v√©ler ce secret (signature num√©rique), ou prouver l&#8217;authenticit√© des donn√©es (empreinte num√©rique). Ces types de preuves cryptographiques sont les outils math√©matiques essentiels au bitcoin et largement utilis√©s dans les applications bitcoin. Ironiquement, le cryptage n&#8217;est pas une partie importante du bitcoin, car ses communications et ses donn√©es de transaction ne sont pas crypt√©es et ne doivent √™tre chiffr√©s pour prot√©ger les fonds. Dans ce chapitre, nous pr√©senterons une partie de la cryptographie utilis√©e dans le bitcoin pour contr√¥ler la propri√©t√© des fonds, sous la forme de cl√©s, d&#8217;adresses et de portefeuilles.</p>
</div>
<div class="sect2">
<h3 id="_pr√©sentation">Pr√©sentation</h3>
<div class="paragraph">
<p>¬†La propri√©t√© du bitcoin est √©tablie par le biais de <em>cl√©s num√©riques</em>, <em>adresses Bitcoin</em> et <em>signatures num√©riques</em>. Les cl√©s num√©riques ne sont pas r√©ellement stock√©es dans le r√©seau, mais sont plut√¥t cr√©√©es et stock√©es par les utilisateurs dans un fichier, ou une simple base de donn√©es, appel√©e <em>wallet</em>. Les cl√©s num√©riques du portefeuille d&#8217;un utilisateur sont totalement ind√©pendantes du protocole Bitcoin et peuvent √™tre g√©n√©r√©es et g√©r√©es par le logiciel du portefeuille de l&#8217;utilisateur sans r√©f√©rence √† la cha√Æne de blocs ni acc√®s √† Internet. Les cl√©s permettent de nombreuses propri√©t√©s int√©ressantes du bitcoin, notamment la confiance et le contr√¥le d√©centralis√©s, l&#8217;attestation de propri√©t√© et le mod√®le de s√©curit√© √† l&#8217;√©preuve de la cryptographie.</p>
</div>
<div class="paragraph">
<p>La plupart des transactions bitcoin n√©cessitent une signature num√©rique valide √† inclure dans la cha√Æne de blocs, qui ne peut √™tre g√©n√©r√©e qu&#8217;avec une cl√© secr√®te ; par cons√©quent, toute personne poss√©dant une copie de cette cl√© a le contr√¥le du bitcoin.  La signature num√©rique utilis√©e pour d√©penser des fonds est √©galement appel√©e <em>t√©moin</em>, un terme utilis√© en cryptographie. Les donn√©es t√©moins dans une transaction bitcoin t√©moignent de la v√©ritable propri√©t√© des fonds d√©pens√©s.</p>
</div>
<div class="paragraph">
<p>Les cl√©s sont fournies par paires constitu√©es d&#8217;une cl√© priv√©e (secr√®te) et une cl√© publique. Consid√©rez la cl√© publique comme similaire √† un num√©ro de compte bancaire et la cl√© priv√©e comme similaire au code PIN secret, ou √† la signature d&#8217;un ch√®que, qui permet de contr√¥ler le compte. Ces cl√©s num√©riques sont tr√®s rarement vues par les utilisateurs de bitcoin. Pour la plupart, ils sont stock√©s dans le fichier du portefeuille et g√©r√©s par le logiciel du portefeuille bitcoin.</p>
</div>
<div class="paragraph">
<p>Dans la partie paiement d&#8217;une transaction bitcoin, la cl√© publique du destinataire est repr√©sent√©e par son empreinte num√©rique, appel√©e <em>adresse Bitcoin</em>, qui est utilis√©e de la m√™me mani√®re que le nom du b√©n√©ficiaire sur un ch√®que (c&#8217;est-√†-dire "Payer √† l&#8217;ordre de") . Dans la plupart des cas, une adresse Bitcoin correspond et est g√©n√©r√©e √† partir d&#8217;une cl√© publique. Cependant, toutes les adresses Bitcoin ne repr√©sentent pas des cl√©s publiques ; ils peuvent √©galement repr√©senter d&#8217;autres b√©n√©ficiaires tels que des scripts, comme nous le verrons plus loin dans ce chapitre. De cette mani√®re, les adresses Bitcoin font abstraction du destinataire des fonds, ce qui rend les destinations de transaction flexibles, similaires aux ch√®ques papier¬†: un instrument de paiement unique qui peut √™tre utilis√© pour payer les comptes des personnes, payer les comptes de l&#8217;entreprise, payer des factures ou payer en esp√®ces. L&#8217;adresse Bitcoin est la seule repr√©sentation des cl√©s que les utilisateurs verront r√©guli√®rement, car c&#8217;est la partie qu&#8217;ils doivent partager avec le monde.</p>
</div>
<div class="paragraph">
<p>Tout d&#8217;abord, nous pr√©senterons la cryptographie et expliquerons les math√©matiques utilis√©es dans le bitcoin. Ensuite, nous verrons comment les cl√©s sont g√©n√©r√©es, stock√©es et g√©r√©es. Nous passerons en revue les diff√©rents formats de codage utilis√©s pour repr√©senter les cl√©s priv√©es et publiques, les adresses et les adresses de script. Enfin, nous nous pencherons sur l&#8217;utilisation avanc√©e des cl√©s et des adresses¬†: adresses personnalis√©es, multisignatures, scripts et portefeuilles papier.</p>
</div>
<div class="sect3">
<h4 id="_cryptographie_√†_cl√©_publique_et_cryptomonnaie">Cryptographie √† cl√© publique et cryptomonnaie</h4>
<div class="paragraph">
<p>La cryptographie √† cl√© publique a √©t√© invent√©e dans les ann√©es 1970 et constitue une base math√©matique pour informatique et s√©curit√© de l&#8217;information.</p>
</div>
<div class="paragraph">
<p>Depuis l&#8217;invention de la cryptographie √† cl√© publique, plusieurs fonctions math√©matiques appropri√©es, telles que l&#8217;exponentiation des nombres premiers et la multiplication des courbes elliptiques, ont √©t√© d√©couvertes. Ces fonctions math√©matiques sont pratiquement irr√©versibles, ce qui signifie qu&#8217;elles sont faciles √† calculer dans un sens et impossibles √† calculer dans le sens oppos√©. Sur la base de ces fonctions math√©matiques, la cryptographie permet la cr√©ation de secrets num√©riques et de signatures num√©riques infalsifiables. Bitcoin utilise la multiplication de courbes elliptiques comme base de sa cryptographie.</p>
</div>
<div class="paragraph">
<p>En bitcoin, nous utilisons la cryptographie √† cl√© publique pour cr√©er une paire de cl√©s qui contr√¥le l&#8217;acc√®s au bitcoin. La paire de cl√©s se compose d&#8217;une cl√© priv√©e et - d√©riv√©e de celle-ci - d&#8217;une cl√© publique unique. La cl√© publique est utilis√©e pour recevoir des fonds et la cl√© priv√©e est utilis√©e pour signer des transactions afin de d√©penser les fonds.</p>
</div>
<div class="paragraph">
<p>Il existe une relation math√©matique entre la cl√© publique et la cl√© priv√©e qui permet d&#8217;utiliser la cl√© priv√©e pour g√©n√©rer des signatures sur les messages. Ces signatures peuvent √™tre valid√©es par rapport √† la cl√© publique sans r√©v√©ler la cl√© priv√©e.</p>
</div>
<div class="paragraph">
<p>Lorsqu&#8217;il d√©pense des bitcoins, le propri√©taire actuel de bitcoins pr√©sente sa cl√© publique et une signature (diff√©rente √† chaque fois, mais cr√©√©e √† partir de la m√™me cl√© priv√©e) dans une transaction pour d√©penser ces bitcoins. Gr√¢ce √† la pr√©sentation de la cl√© publique et de la signature, tous les membres du r√©seau Bitcoin peuvent v√©rifier et accepter la transaction comme valide, confirmant que la personne transf√©rant le bitcoin en √©tait propri√©taire au moment du transfert.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p> Dans la plupart des impl√©mentations de portefeuille, les cl√©s priv√©es et publiques sont stock√©es ensemble sous la forme d&#8217;une <em>paire de cl√©s</em> pour plus de commodit√©. Cependant, la cl√© publique peut √™tre calcul√©e √† partir de la cl√© priv√©e, de sorte qu&#8217;il est √©galement possible de ne stocker que la cl√© priv√©e.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="private_public_keys">Cl√©s priv√©es et publiques</h4>
<div class="paragraph">
<p> Un portefeuille bitcoin contient une collection de paires de cl√©s, chacune compos√©e d&#8217;une cl√© priv√©e et d&#8217;une cl√© publique. La cl√© priv√©e (k) est un nombre, g√©n√©ralement choisi au hasard. A partir de la cl√© priv√©e, nous utilisons la multiplication par courbe elliptique, une fonction cryptographique √† sens unique, pour g√©n√©rer une cl√© publique (K). A partir de la cl√© publique (K), nous utilisons une fonction de hachage cryptographique unidirectionnelle pour g√©n√©rer une adresse Bitcoin (A). Dans cette section, nous commencerons par g√©n√©rer la cl√© priv√©e, examinerons les math√©matiques de la courbe elliptique utilis√©es pour la transformer en cl√© publique, et enfin, g√©n√©rerons une adresse Bitcoin √† partir de la cl√© publique. La relation entre la cl√© priv√©e, la cl√© publique et l&#8217;adresse Bitcoin est indiqu√©e dans <a href="#k_to_K_to_A">Cl√© priv√©e, cl√© publique et adresse Bitcoin</a>.</p>
</div>
<div id="k_to_K_to_A" class="imageblock">
<div class="content">
<img src="images/mbc2_0401.png" alt="privk √† pubK √† adresse A">
</div>
<div class="title">Figure 1. Cl√© priv√©e, cl√© publique et adresse Bitcoin</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Pourquoi utiliser la cryptographie asym√©trique (cl√©s publiques/priv√©es)¬†?</div>
<div class="paragraph">
<p>Pourquoi la cryptographie asym√©trique est-elle utilis√©e dans le bitcoin¬†? Elle n&#8217;est pas utilis√©e pour "crypter" (rendre secr√®tes) les transactions. Au contraire, la propri√©t√© utile de la cryptographie asym√©trique est la capacit√© √† g√©n√©rer des <em>signatures num√©riques</em>. Une cl√© priv√©e peut √™tre appliqu√©e √† l&#8217;empreinte num√©rique d&#8217;une transaction pour produire une signature num√©rique. Cette signature ne peut √™tre produite que par une personne connaissant la cl√© priv√©e. Cependant, toute personne ayant acc√®s √† la cl√© publique et √† l&#8217;empreinte digitale de la transaction peut les utiliser pour <em>v√©rifier</em> la signature. Cette propri√©t√© utile de la cryptographie asym√©trique permet √† quiconque de v√©rifier chaque signature sur chaque transaction, tout en garantissant que seuls les propri√©taires de cl√©s priv√©es peuvent produire des signatures valides.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="private_keys">Cl√©s priv√©es</h4>
<div class="paragraph">
<p>Une cl√© priv√©e est simplement un nombre, choisi au hasard . La propri√©t√© et le contr√¥le de la cl√© priv√©e sont √† la base du contr√¥le de l&#8217;utilisateur sur tous les fonds associ√©s √† l&#8217;adresse Bitcoin correspondante. La cl√© priv√©e est utilis√©e pour cr√©er des signatures n√©cessaires pour d√©penser des bitcoins en prouvant la propri√©t√© des fonds utilis√©s dans une transaction. La cl√© priv√©e doit rester secr√®te √† tout moment, car la r√©v√©ler √† des tiers √©quivaut √† leur donner le contr√¥le sur le bitcoin s√©curis√© par cette cl√©. La cl√© priv√©e doit √©galement √™tre sauvegard√©e et prot√©g√©e contre toute perte accidentelle, car si elle est perdue, elle ne peut pas √™tre r√©cup√©r√©e et les fonds qu&#8217;elle garantit sont √©galement perdus √† jamais.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>La cl√© priv√©e bitcoin n&#8217;est qu&#8217;un nombre. Vous pouvez choisir vos cl√©s priv√©es au hasard en utilisant simplement une pi√®ce de monnaie, un crayon et du papier¬†: lancez une pi√®ce 256 fois et vous avez les chiffres binaires d&#8217;une cl√© priv√©e al√©atoire que vous pouvez utiliser dans un portefeuille bitcoin. La cl√© publique peut alors √™tre g√©n√©r√©e √† partir de la cl√© priv√©e.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_g√©n√©rer_une_cl√©_priv√©e_√†_partir_dun_nombre_al√©atoire">G√©n√©rer une cl√© priv√©e √† partir d&#8217;un nombre al√©atoire</h5>
<div class="paragraph">
<p>La premi√®re et la plus importante √©tape de la g√©n√©ration de cl√©s consiste √† trouver une source s√©curis√©e d&#8217;entropie ou de caract√®re al√©atoire. La cr√©ation d&#8217;une cl√© bitcoin est essentiellement la m√™me que "Choisissez un nombre entre 1 et 2<sup>256</sup>". La m√©thode exacte que vous utilisez pour choisir ce nombre n&#8217;a pas d&#8217;importance tant qu&#8217;elle n&#8217;est pas pr√©visible ou reproductible. Le logiciel Bitcoin utilise les g√©n√©rateurs de nombres al√©atoires du syst√®me d&#8217;exploitation sous-jacent pour produire 256 bits d&#8217;entropie (al√©atoire). Habituellement, le g√©n√©rateur de nombres al√©atoires du syst√®me d&#8217;exploitation est initialis√© par une source humaine d&#8217;al√©atoire, c&#8217;est pourquoi il peut vous √™tre demand√© de remuer votre souris pendant quelques secondes.</p>
</div>
<div class="paragraph">
<p>Plus pr√©cis√©ment, la cl√© priv√©e peut √™tre n&#8217;importe quel nombre compris entre <code>0</code> et <code>n - 1</code> inclus, o√π n est une constante (n = 1,1578 * 10<sup>77</sup>, l√©g√®rement inf√©rieure √† 2<sup>256</sup>) d√©finie comme l&#8217;ordre de la courbe elliptique utilis√©e dans le bitcoin (voir <a href="#elliptic_curve">La cryptographie √† courbe elliptique expliqu√©e</a>). Pour cr√©er une telle cl√©, nous choisissons au hasard un nombre de 256 bits et v√©rifions qu&#8217;il est inf√©rieur √† n. En termes de programmation, cela est g√©n√©ralement r√©alis√© en alimentant une plus grande cha√Æne de bits al√©atoires, collect√©s √† partir d&#8217;une source al√©atoire s√©curis√©e par cryptographie, dans l&#8217;algorithme de hachage SHA256, qui produira commod√©ment un nombre de 256 bits. Si le r√©sultat est inf√©rieur √† n, nous avons une cl√© priv√©e appropri√©e. Sinon, nous r√©essayons simplement avec un autre nombre al√©atoire.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>N&#8217;√©crivez pas votre propre code pour cr√©er un nombre al√©atoire ou n&#8217;utilisez pas un nombre al√©atoire "simple" g√©n√©r√© par votre langage de programmation. Utilisez un g√©n√©rateur de nombres pseudo-al√©atoires cryptographiquement s√©curis√© (CSPRNG) avec une valeur d&#8217;amor√ßage provenant d&#8217;une source d&#8217;entropie suffisante. √âtudiez la documentation de la biblioth√®que de g√©n√©rateurs de nombres al√©atoires que vous choisissez pour vous assurer qu&#8217;elle est cryptographiquement s√©curis√©e. La mise en ≈ìuvre correcte du CSPRNG est essentielle √† la s√©curit√© des cl√©s.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Ce qui suit est une cl√© priv√©e g√©n√©r√©e al√©atoirement (k) affich√©e au format hexad√©cimal (256¬†bits affich√©s sous la forme de 64 chiffres hexad√©cimaux, chacun de 4¬†bits)¬†:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>1E99423A4ED27608A15A2616A2B0E9E52CED330AC530EDCC32C8FFC6A526AEDD</pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>La taille de l&#8217;espace de cl√© priv√©e de bitcoin, (2<sup>256</sup>) est un nombre insondable. Il est d&#8217;environ 10<sup>77</sup> en d√©cimal. √Ä titre de comparaison, on estime que l&#8217;univers visible contient 10<sup>80</sup> atomes.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Pour g√©n√©rer une nouvelle cl√© avec le client Bitcoin Core (voir <a href="#ch03_bitcoin_client">[ch03_bitcoin_client]</a>), utilisez la commande getnewaddress. Pour des raisons de s√©curit√©, il affiche uniquement l&#8217;adresse, pas la cl√© priv√©e. Pour demander √† <code>bitcoind</code> d&#8217;exposer la cl√© priv√©e, utilisez la commande dumpprivkey. La commande <code>dumpprivkey</code> affiche la cl√© priv√©e dans un format de somme de contr√¥le Base58 appel√© <em>Wallet Import Format</em> (WIF ou format d&#8217;importation de portefeuille), que nous examinerons plus en d√©tail dans <a href="#priv_formats">Formats de cl√© priv√©e</a>. Voici un exemple de g√©n√©ration et d&#8217;affichage d&#8217;une cl√© priv√©e √† l&#8217;aide de ces deux commandes¬†:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ bitcoin-cli getnewaddress
1J7mdg5rbQyUHENYdx39WVWK7fsLpEoXZy
$ bitcoin-cli dumpprivkey 1J7mdg5rbQyUHENYdx39WVWK7fsLpEoXZy
KxFC1jmwwCoACiCAWZ3eXa96mBM6tb3TYzGmf6YwgdGWZgawvrtJ</pre>
</div>
</div>
<div class="paragraph">
<p>La commande <code>dumpprivkey</code> ouvre le portefeuille et extrait la cl√© priv√©e qui a √©t√© g√©n√©r√©e par la commande getnewaddress. Il n&#8217;est pas possible pour <code>bitcoind</code> de conna√Ætre la cl√© priv√©e √† partir de l&#8217;adresse √† moins qu&#8217;elles ne soient toutes deux stock√©es dans le portefeuille.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>La commande <code>dumpprivkey</code> ne g√©n√®re pas de cl√© priv√©e √† partir d&#8217;une adresse, car cela est impossible. La commande r√©v√®le simplement la cl√© priv√©e qui est d√©j√† connue du portefeuille et qui a √©t√© g√©n√©r√©e par la commande getnewaddress.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph pagebreak-before">
<p>Vous pouvez √©galement utiliser l&#8217;outil de ligne de commande Bitcoin Explorer (voir <a href="#appdx_bx">[appdx_bx]</a>) pour g√©n√©rer et afficher des cl√©s priv√©es avec les commandes seed, <code>ec-new</code> et ec-to-wif¬†:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ bx seed | bx ec-new | bx ec-to-wif
5J3mBbAH58CpQ3Y5RNJpUKPE62SQ5tfcvU2JpbnkeyhfsYB1Jcn</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="pubkey">Cl√©s publiques</h4>
<div class="paragraph">
<p>La cl√© publique est calcul√©e √† partir de la cl√© priv√©e en utilisant la multiplication par courbe elliptique, qui est irr√©versible¬†: <em>K</em> = <em>k</em> * <em>G</em>, o√π <em>k</em> est la cl√© priv√©e, <em>G</em> est un point constant appel√© <em>point g√©n√©rateur</em> et <em>K</em> est la cl√© publique r√©sultante. L&#8217;op√©ration inverse, connue sous le nom de "trouver le logarithme discret" - calculer <em>k</em> si vous connaissez <em>K</em> - est aussi difficile que d&#8217;essayer toutes les valeurs possibles de <em>k</em>, c&#8217;est-√†-dire par une recherche par force brute. Avant de montrer comment g√©n√©rer une cl√© publique √† partir d&#8217;une cl√© priv√©e, examinons un peu plus en d√©tail la cryptographie √† courbe elliptique.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>La multiplication de courbe elliptique est un type de fonction que les cryptographes appellent une fonction ¬´ √† sens unique ¬ª¬†: elle est facile √† faire dans un sens (multiplication) et impossible √† faire dans le sens inverse (¬´ division ¬ª, ou trouver le logarithme discret). Le propri√©taire de la cl√© priv√©e peut facilement cr√©er la cl√© publique, puis la partager avec le monde entier, sachant que personne ne peut inverser la fonction et calculer la cl√© priv√©e √† partir de la cl√© publique. Cette astuce math√©matique devient la base de signatures num√©riques infalsifiables et s√©curis√©es qui prouvent la propri√©t√© des fonds bitcoin.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="elliptic_curve">La cryptographie √† courbe elliptique expliqu√©e</h4>
<div class="paragraph">
<p> La cryptographie √† courbe elliptique est un type de cryptographie asym√©trique ou √† cl√© publique bas√©e sur le probl√®me du logarithme discret exprim√© par addition et multiplication sur les points d&#8217;une courbe elliptique.</p>
</div>
<div class="paragraph">
<p><a href="#ecc-curve">Une courbe elliptique</a> est un exemple de courbe elliptique, similaire √† celle utilis√©e par le bitcoin.</p>
</div>
<div id="ecc-curve" class="imageblock smallerthirty">
<div class="content">
<img src="images/mbc2_0402.png" alt="courbe ecc">
</div>
<div class="title">Figure 2. Une courbe elliptique</div>
</div>
<div class="paragraph">
<p>Bitcoin utilise une courbe elliptique sp√©cifique et un ensemble de constantes math√©matiques, telles que d√©finies dans une norme appel√©e secp256k1, √©tablie par le National Institute of Standards and Technology (NIST). La courbe <code>secp256k1</code> est d√©finie par la fonction suivante, qui produit une courbe elliptique¬†:</p>
</div>
<div class="stemblock">
<div class="content">
\[\begin{equation}
{y^2 = (x^3 + 7)}~\text{over}~(\mathbb{F}_p)
\end{equation}\]
</div>
</div>
<div class="paragraph">
<p>ou</p>
</div>
<div class="stemblock">
<div class="content">
\[\begin{equation}
{y^2 \mod p = (x^3 + 7) \mod p}
\end{equation}\]
</div>
</div>
<div class="paragraph">
<p>Le <em>mod p</em> (modulo nombre premier p) indique que cette courbe est sur un corps fini d&#8217;ordre premier <em>p</em>, √©galement √©crit comme \(\mathbb{F}_p\), o√π p = 2<sup>256</sup> ‚Äì 2<sup>32</sup> ‚Äì 2<sup>9</sup> ‚Äì 2<sup>8</sup> ‚Äì 2<sup>7</sup> ‚Äì 2<sup>6</sup> ‚Äì 2<sup>4</sup> ‚Äì 1, un tr√®s grand nombre premier.</p>
</div>
<div class="paragraph">
<p>Parce que cette courbe est d√©finie sur un champ fini d&#8217;ordre premier au lieu de sur les nombres r√©els, elle ressemble √† un motif de points dispers√©s en deux dimensions, ce qui la rend difficile √† visualiser. Cependant, le calcul est identique √† celui d&#8217;une courbe elliptique sur des nombres r√©els. A titre d&#8217;exemple, <a href="#ecc-over-F17-math">Cryptographie sur courbe elliptique¬†: visualisation d&#8217;une courbe elliptique sur F(p), avec p=17</a> montre la m√™me courbe elliptique sur un champ fini beaucoup plus petit d&#8217;ordre premier 17, montrant un motif de points sur une grille. La courbe elliptique du bitcoin <code>secp256k1</code> peut √™tre consid√©r√©e comme un motif beaucoup plus complexe de points sur une grille insondable.</p>
</div>
<div id="ecc-over-F17-math" class="imageblock smallersixty">
<div class="content">
<img src="images/mbc2_0403.png" alt="ecc sur math√©matiques F17">
</div>
<div class="title">Figure 3. Cryptographie sur courbe elliptique¬†: visualisation d&#8217;une courbe elliptique sur F(p), avec p=17</div>
</div>
<div class="paragraph">
<p>Ainsi, par exemple, ce qui suit est un point P de coordonn√©es (x,y) qui est un point sur la courbe secp256k1¬†:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>P = (55066263022277343669578718895168534326250603453777594175500187360389116729240, 32670510020758816978083085130507043184471273380659243275938904335757337482424)</pre>
</div>
</div>
<div class="paragraph">
<p><a href="#example_4_1">Utiliser Python pour confirmer que ce point est sur la courbe elliptique</a> montre comment vous pouvez v√©rifier cela vous-m√™me en utilisant Python¬†:</p>
</div>
<div id="example_4_1" class="exampleblock">
<div class="title">Example 1. Utiliser Python pour confirmer que ce point est sur la courbe elliptique</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-pycon" data-lang="pycon">Python 3.4.0 (default, Mar 30 2014, 19:23:13)
[GCC 4.2.1 Compatible Apple LLVM 5.1 (clang-503.0.38)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
&gt;&gt;&gt; p = 115792089237316195423570985008687907853269984665640564039457584007908834671663
&gt;&gt;&gt; x = 55066263022277343669578718895168534326250603453777594175500187360389116729240
&gt;&gt;&gt; y = 32670510020758816978083085130507043184471273380659243275938904335757337482424
&gt;&gt;&gt; (x ** 3 + 7 - y**2) % p
0</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Dans les math√©matiques des courbes elliptiques, il existe un point appel√© le "point √† l&#8217;infini", qui correspond √† peu pr√®s au r√¥le de z√©ro. Sur les ordinateurs, il est parfois repr√©sent√© par x = y = 0 (ce qui ne satisfait pas l&#8217;√©quation de la courbe elliptique, mais c&#8217;est un cas s√©par√© facile qui peut √™tre v√©rifi√©).</p>
</div>
<div class="paragraph">
<p>Il existe √©galement un op√©rateur +, appel√© "addition", qui poss√®de certaines propri√©t√©s similaires √† l&#8217;addition traditionnelle de nombres r√©els apprise par les √©l√®ves du primaire. √âtant donn√© deux points P<sub>1</sub> et P<sub>2</sub> sur la courbe elliptique, il existe un troisi√®me point P<sub>3</sub> = P<sub>1</sub> + P<sub>2</sub>, √©galement sur la courbe elliptique.</p>
</div>
<div class="paragraph">
<p>G√©om√©triquement, ce troisi√®me point P<sub>3</sub> est calcul√© en tra√ßant une ligne entre P<sub>1</sub> et P<sub>2</sub>. Cette ligne coupera la courbe elliptique exactement √† un endroit suppl√©mentaire. Appelons ce point P<sub>3</sub> = (x, y). Renvoy√© ensuite sur l&#8217;axe des x pour obtenir P<sub>3</sub> = (x, ‚Äìy).</p>
</div>
<div class="paragraph">
<p>Il y a quelques cas particuliers qui expliquent la n√©cessit√© du "point √† l&#8217;infini".</p>
</div>
<div class="paragraph">
<p>Si P<sub>1</sub> et P<sub>2</sub> sont le m√™me point, la ligne "entre" P<sub>1</sub> et P<sub>2</sub> doit s&#8217;√©tendre pour √™tre la tangente sur la courbe en ce point P<sub>1</sub>. Cette tangente coupera la courbe en exactement un nouveau point. Vous pouvez utiliser des techniques de calcul pour d√©terminer la pente de la ligne tangente. Ces techniques fonctionnent curieusement, m√™me si nous restreignons notre int√©r√™t aux points de la courbe √† deux coordonn√©es enti√®res !</p>
</div>
<div class="paragraph">
<p>Dans certains cas (par exemple, si P<sub>1</sub> et P<sub>2</sub> ont les m√™mes valeurs x mais des valeurs y diff√©rentes), la ligne entre P<sub>1</sub> et P<sub>2</sub> sera exactement verticale, auquel cas P<sub>3</sub> = "point √† l&#8217;infini."</p>
</div>
<div class="paragraph">
<p>Si P<sub>1</sub> est le "point √† l&#8217;infini", alors P<sub>1</sub> ` P<sub>2</sub> = P<sub>2</sub>. De m√™me, si P<sub>2</sub> est le point √† l&#8217;infini, alors P<sub>1</sub> ` P<sub>2</sub> = P<sub>1</sub>. Cela montre comment le point √† l&#8217;infini joue le r√¥le de z√©ro.</p>
</div>
<div class="paragraph">
<p>Il s&#8217;av√®re que + est associatif, ce qui signifie que (A + B) + C = A + (B + C). Cela signifie que nous pouvons √©crire A + B + C sans parenth√®ses et sans ambigu√Øt√©.</p>
</div>
<div class="paragraph">
<p>Maintenant que nous avons d√©fini l&#8217;addition, nous pouvons d√©finir la multiplication de la mani√®re standard qui extensionne l&#8217;addition. Pour un point P sur la courbe elliptique, si k est un nombre entier, alors kP = P ` P ` P ` &#8230;&#8203; ` P (k fois). Notez que k est parfois appel√© un "exposant" dans ce cas.</p>
</div>
</div>
<div class="sect3">
<h4 id="public_key_derivation">G√©n√©ration d&#8217;une cl√© publique</h4>
<div class="paragraph">
<p>En partant d&#8217;une cl√© priv√©e sous la forme d&#8217;un nombre g√©n√©r√© al√©atoirement <em>k</em>, nous la multiplions par un point pr√©d√©termin√© sur la courbe appel√© <em>point g√©n√©rateur</em> <em>G</em> pour produire un autre point ailleurs sur la courbe, qui est la cl√© publique correspondante <em>K</em>. Le point g√©n√©rateur est sp√©cifi√© dans le cadre de la norme <code>secp256k1</code> et est toujours le m√™me pour toutes les cl√©s en bitcoin¬†:</p>
</div>
<div class="stemblock">
<div class="content">
\[\begin{equation}
{K = k * G}
\end{equation}\]
</div>
</div>
<div class="paragraph">
<p>o√π <em>k</em> est la cl√© priv√©e, <em>G</em> est le point g√©n√©rateur et <em>K</em> est la cl√© publique r√©sultante, un point sur la courbe. Comme le point g√©n√©rateur est toujours le m√™me pour tous les utilisateurs de bitcoins, une cl√© priv√©e <em>k</em> multipli√©e par <em>G</em> donnera toujours la m√™me cl√© publique <em>K</em>. La relation entre <em>k</em> et <em>K</em> est fixe, mais ne peut √™tre calcul√©e que dans un sens, de <em>k</em> vers <em>K</em>. C&#8217;est pourquoi une adresse Bitcoin (d√©riv√©e de <em>K</em>) peut √™tre partag√©e avec n&#8217;importe qui et ne r√©v√®le pas la cl√© priv√©e de l&#8217;utilisateur (<em>k</em>).</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>Une cl√© priv√©e peut √™tre convertie en cl√© publique, mais une cl√© publique ne peut pas √™tre reconvertie en cl√© priv√©e car le calcul ne fonctionne que dans un sens.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>En impl√©mentant la multiplication par courbe elliptique, nous prenons la cl√© priv√©e <em>k</em> g√©n√©r√©e pr√©c√©demment et la multiplions avec le point g√©n√©rateur G pour trouver la cl√© publique <em>K</em>¬†:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>K = 1E99423A4ED27608A15A2616A2B0E9E52CED330AC530EDCC32C8FFC6A526AEDD * G</pre>
</div>
</div>
<div class="paragraph">
<p>La cl√© publique <em>K</em> est d√©finie comme un point K = (x,y)¬†:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>K = (x, y)

o√π,

x = F028892BAD7ED57D2FB57BF33081D5CFCF6F9ED3D3D7F159C2E2FFF579DC341A
y = 07CF33DA18BD734C600B96A72BBC4749D5141C90EC8AC328AE52DDFE2E505BDB</pre>
</div>
</div>
<div class="paragraph">
<p>Pour visualiser la multiplication d&#8217;un point avec un nombre entier, nous utiliserons la courbe elliptique plus simple sur des nombres r√©els - rappelez-vous, le calcul est le m√™me. Notre objectif est de trouver le multiple <em>kG</em> du point g√©n√©rateur <em>G</em>, ce qui revient √† ajouter <em>G</em> √† lui-m√™me, <em>k</em> fois de suite. Dans les courbes elliptiques, l&#8217;ajout d&#8217;un point √† lui-m√™me √©quivaut √† tracer une ligne tangente sur le point et √† trouver √† nouveau l&#8217;endroit o√π il coupe la courbe, puis √† refl√©ter ce point sur l&#8217;axe des x.</p>
</div>
<div class="paragraph">
<p><a href="#ecc_illustrated">Cryptographie sur courbe elliptique¬†: visualisation de la multiplication d&#8217;un point G par un entier k sur une courbe elliptique</a> montre le processus de d√©rivation de <em>G</em>, <em>2G</em>, <em>4G</em> et <em>8G</em> en tant qu&#8217;op√©ration g√©om√©trique sur la courbe.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>Bitcoin utilise la <a href="https://github.com/bitcoin-core/secp256k1">biblioth√®que C optimis√©e secp256k1</a> pour effectuer les calculs de la courbe elliptique.</p>
</div>
</td>
</tr>
</table>
</div>
<div id="ecc_illustrated" class="imageblock">
<div class="content">
<img src="images/mbc2_0404.png" alt="illustration d&#8217;ecc">
</div>
<div class="title">Figure 4. Cryptographie sur courbe elliptique¬†: visualisation de la multiplication d&#8217;un point G par un entier k sur une courbe elliptique</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_adresses_bitcoin">Adresses Bitcoin</h3>
<div class="paragraph">
<p>Une adresse Bitcoin est une cha√Æne de chiffres et de caract√®res qui peut √™tre partag√©e avec toute personne souhaitant vous envoyer de l&#8217;argent. Les adresses produites √† partir de cl√©s publiques consistent en une cha√Æne de chiffres et de lettres commen√ßant par le chiffre "1". Voici un exemple d&#8217;adresse Bitcoin¬†:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>1J7mdg5rbQyUHENYdx39WVWK7fsLpEoXZy</pre>
</div>
</div>
<div class="paragraph">
<p>L&#8217;adresse Bitcoin est ce qui appara√Æt le plus souvent dans une transaction en tant que "destinataire" des fonds. Si nous comparons une transaction bitcoin √† un ch√®que papier, l&#8217;adresse Bitcoin est le b√©n√©ficiaire, c&#8217;est ce que nous √©crivons sur la ligne apr√®s "Payer √† l&#8217;ordre de". Sur un ch√®que papier, ce b√©n√©ficiaire peut parfois √™tre le nom d&#8217;un titulaire de compte bancaire, mais peut √©galement inclure des soci√©t√©s, des institutions ou m√™me des esp√®ces. √âtant donn√© que les ch√®ques papier n&#8217;ont pas besoin de sp√©cifier un compte, mais utilisent plut√¥t un nom abstrait en tant que destinataire des fonds, ce sont des instruments de paiement tr√®s flexibles. Les transactions Bitcoin utilisent une abstraction similaire, l&#8217;adresse Bitcoin, pour les rendre tr√®s flexibles. Une adresse Bitcoin peut repr√©senter le propri√©taire d&#8217;une paire de cl√©s priv√©e/publique, ou elle peut repr√©senter autre chose, comme un script de paiement, comme nous le verrons dans <a href="#p2sh">[p2sh]</a>. Pour l&#8217;instant, examinons le cas simple; une adresse Bitcoin qui repr√©sente et est d√©riv√©e d&#8217;une cl√© publique.</p>
</div>
<div class="paragraph">
<p>L&#8217;adresse Bitcoin est d√©riv√©e de la cl√© publique gr√¢ce √† l&#8217;utilisation d&#8217;un hachage cryptographique unidirectionnel. Un "algorithme de hachage" ou simplement "algorithme de hachage" est une fonction √† sens unique qui produit une empreinte digitale ou un "hachage" (ou un "r√©sultat de hachage") d&#8217;une entr√©e de taille arbitraire. Les fonctions de hachage cryptographiques sont largement utilis√©es dans le bitcoin¬†: dans les adresses Bitcoin, dans les adresses de script et dans l&#8217;algorithme de minage de preuve de travail. Les algorithmes utilis√©s pour cr√©er une adresse Bitcoin √† partir d&#8217;une cl√© publique sont le Secure Hash Algorithm (SHA) et le RACE Integrity Primitives Evaluation Message Digest (RIPEMD), ou plus pr√©cis√©ment SHA256 et RIPEMD160.</p>
</div>
<div class="paragraph">
<p>En commen√ßant par la cl√© publique <em>K</em>, nous calculons le hachage SHA256, puis calculons le hachage RIPEMD160 du r√©sultat, produisant un nombre de 160 bits (20 octets) :</p>
</div>
<div class="stemblock">
<div class="content">
\[\begin{equation}
{A = RIPEMD160(SHA256(K))}
\end{equation}\]
</div>
</div>
<div class="paragraph">
<p>o√π <em>K</em> est la cl√© publique et <em>A</em> est l&#8217;adresse Bitcoin r√©sultante.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>Une adresse Bitcoin n&#8217;est <em>pas</em> la m√™me chose qu&#8217;une cl√© publique. Les adresses Bitcoin sont d√©riv√©es d&#8217;une cl√© publique √† l&#8217;aide d&#8217;une fonction unidirectionnelle.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Les adresses Bitcoin sont presque toujours encod√©es en "Base58Check" (voir <a href="#base58">Encodage Base58 et Base58Check</a>), qui utilise 58 caract√®res (un syst√®me de num√©rotation Base58) et une somme de contr√¥le pour faciliter la lisibilit√© humaine, √©viter toute ambigu√Øt√© et prot√©ger contre les erreurs de transcription et de saisie d&#8217;adresse. Base58Check est √©galement utilis√© de nombreuses autres mani√®res dans Bitcoin, par exemple lorsque chaque fois qu&#8217;un utilisateur a besoin de lire et de transcrire correctement un num√©ro, tel qu&#8217;une adresse Bitcoin, une cl√© priv√©e, une cl√© crypt√©e ou un hachage de script. Dans la section suivante, nous examinerons les m√©canismes d&#8217;encodage et de d√©codage Base58Check et les repr√©sentations qui en r√©sultent. <a href="#pubkey_to_address">Cl√© publique vers adresse Bitcoin¬†: conversion d&#8217;une cl√© publique en adresse Bitcoin</a> illustre la conversion d&#8217;une cl√© publique en une adresse Bitcoin.</p>
</div>
<div id="pubkey_to_address" class="imageblock">
<div class="content">
<img src="images/mbc2_0405.png" alt="pubkey √† adresse">
</div>
<div class="title">Figure 5. Cl√© publique vers adresse Bitcoin¬†: conversion d&#8217;une cl√© publique en adresse Bitcoin</div>
</div>
<div class="sect3">
<h4 id="base58">Encodage Base58 et Base58Check</h4>
<div class="paragraph">
<p>Afin de repr√©senter les nombres longs de mani√®re compacte, en utilisant moins de symboles, de nombreux syst√®mes informatiques utilisent des repr√©sentations alphanum√©riques mixtes avec une base sup√©rieure √† 10. Par exemple, alors que le syst√®me d√©cimal traditionnel utilise les 10 chiffres de 0 √† 9, le syst√®me hexad√©cimal utilise 16, avec les lettres A √† F comme six symboles suppl√©mentaires. Un nombre repr√©sent√© au format hexad√©cimal est plus court que la repr√©sentation d√©cimale √©quivalente. Encore plus compacte, la repr√©sentation Base64 utilise 26 lettres minuscules, 26 lettres majuscules, 10 chiffres et 2 caract√®res suppl√©mentaires tels que &#8220;+&#8221; et "/" pour transmettre des donn√©es binaires sur des supports textuels tels que le courrier √©lectronique. Base64 est le plus couramment utilis√© pour ajouter des pi√®ces jointes binaires aux e-mails. Base58 est un format de codage binaire bas√© sur du texte d√©velopp√© pour √™tre utilis√© dans le bitcoin et utilis√© dans de nombreuses autres cryptomonnaies. Il offre un √©quilibre entre repr√©sentation compacte, lisibilit√© et d√©tection et pr√©vention des erreurs. Base58 est un sous-ensemble de Base64, utilisant des lettres et des chiffres majuscules et minuscules, mais omettant certains caract√®res qui sont fr√©quemment confondus et qui peuvent appara√Ætre identiques lorsqu&#8217;ils sont affich√©s dans certaines polices. Plus pr√©cis√©ment, Base58 est Base64 sans le 0 (chiffre z√©ro), O (o majuscule), l (L inf√©rieur), I (i majuscule) et les symboles &#8220;+&#8221; et "/". Ou, plus simplement, c&#8217;est un ensemble de lettres minuscules et majuscules et de chiffres sans les quatre (0, O, l, I) que nous venons de mentionner. <a href="#base58alphabet">Alphabet Base58 de Bitcoin</a> affiche l&#8217;alphabet Base58 complet.</p>
</div>
<div id="base58alphabet" class="exampleblock">
<div class="title">Example 2. Alphabet Base58 de Bitcoin</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre>123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Pour ajouter une s√©curit√© suppl√©mentaire contre les fautes de frappe ou les erreurs de transcription, Base58Check est un format d&#8217;encodage Base58, fr√©quemment utilis√© dans le bitcoin, qui poss√®de un code de v√©rification des erreurs int√©gr√©. La somme de contr√¥le est constitu√©e de quatre octets suppl√©mentaires ajout√©s √† la fin des donn√©es en cours de codage. La somme de contr√¥le est d√©riv√©e du hachage des donn√©es cod√©es et peut donc √™tre utilis√©e pour d√©tecter et pr√©venir les erreurs de transcription et de frappe. Lorsqu&#8217;il est pr√©sent√© avec le code Base58Check, le logiciel de d√©codage calcule la somme de contr√¥le des donn√©es et la compare √† la somme de contr√¥le incluse dans le code. Si les deux ne correspondent pas, une erreur a √©t√© introduite et les donn√©es Base58Check ne sont pas valides. Cela emp√™che qu&#8217;une adresse Bitcoin mal saisie soit accept√©e par le logiciel du portefeuille comme destination valide, une erreur qui entra√Ænerait autrement une perte de fonds.</p>
</div>
<div class="paragraph">
<p>Pour convertir des donn√©es (un nombre) dans un format Base58Check, nous ajoutons d&#8217;abord un pr√©fixe aux donn√©es, appel√© "octet de version", qui sert √† identifier facilement le type de donn√©es encod√©es. Par exemple, dans le cas d&#8217;une adresse Bitcoin, le pr√©fixe est z√©ro (0x00 en hexad√©cimal), alors que le pr√©fixe utilis√© lors de l&#8217;encodage d&#8217;une cl√© priv√©e est 128 (0x80 en hexad√©cimal). Une liste des pr√©fixes de version courants est affich√©e dans <a href="#base58check_versions">Base58Check pr√©fixe de version et exemples de r√©sultats encod√©s</a>.</p>
</div>
<div class="paragraph">
<p>Ensuite, nous calculons la somme de contr√¥le "double-SHA", ce qui signifie que nous appliquons l&#8217;algorithme de hachage SHA256 deux fois sur le r√©sultat pr√©c√©dent (pr√©fixe et donn√©es):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>somme de contr√¥le (checksum) = SHA256(SHA256(pr√©fixe+donn√©es))</pre>
</div>
</div>
<div class="paragraph">
<p>√Ä partir du hachage de 32 octets r√©sultant (hachage-d&#8217;un-hachage), nous ne prenons que les quatre premiers octets. Ces quatre octets servent de code de contr√¥le d&#8217;erreur ou de somme de contr√¥le (checksum). La somme de contr√¥le est concat√©n√©e (ajout√©e) √† la fin.</p>
</div>
<div class="paragraph">
<p>Le r√©sultat est compos√© de trois √©l√©ments¬†: un pr√©fixe, les donn√©es et une somme de contr√¥le. Ce r√©sultat est encod√© en utilisant l&#8217;alphabet Base58 d√©crit pr√©c√©demment. <a href="#base58check_encoding">Encodage Base58Check¬†: un format Base58, versionn√© et √† somme de contr√¥le pour encoder sans ambigu√Øt√© les donn√©es bitcoin</a> illustre le processus d&#8217;encodage Base58Check.</p>
</div>
<div id="base58check_encoding" class="imageblock">
<div class="content">
<img src="images/mbc2_0406.png" alt="Base58CheckEncoding">
</div>
<div class="title">Figure 6. Encodage Base58Check¬†: un format Base58, versionn√© et √† somme de contr√¥le pour encoder sans ambigu√Øt√© les donn√©es bitcoin</div>
</div>
<div class="paragraph">
<p>En bitcoin, la plupart des donn√©es pr√©sent√©es √† l&#8217;utilisateur sont encod√©es en Base58Check pour les rendre compactes, faciles √† lire et faciles √† d√©tecter les erreurs. Le pr√©fixe de version dans l&#8217;encodage Base58Check est utilis√© pour cr√©er des formats faciles √† distinguer qui, lorsqu&#8217;ils sont encod√©s en Base58, contiennent des caract√®res sp√©cifiques au d√©but de la charge utile encod√©e en Base58Check. Ces caract√®res permettent aux humains d&#8217;identifier facilement le type de donn√©es cod√©es et comment les utiliser. C&#8217;est ce qui diff√©rencie, par exemple, une adresse Bitcoin encod√©e en Base58Check qui commence par un 1 d&#8217;une cl√© priv√©e WIF encod√©e en Base58Check qui commence par un 5. Quelques exemples de pr√©fixes de version et les caract√®res Base58 r√©sultants sont affich√©s dans <a href="#base58check_versions">Base58Check pr√©fixe de version et exemples de r√©sultats encod√©s</a>.</p>
</div>
<table id="base58check_versions" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Base58Check pr√©fixe de version et exemples de r√©sultats encod√©s</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Pr√©fixe de version (hex)</th>
<th class="tableblock halign-left valign-top">Pr√©fixe de r√©sultat Base58</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adresse Bitcoin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x00</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adresse de hachage Pay-to-Script</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x05</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adresse de test Bitcoin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x6F</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">m ou n</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cl√© priv√©e WIF</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x80</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5, K ou L</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cl√© priv√©e crypt√©e BIP-38</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x0142</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6P</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cl√© publique √©tendue BIP-32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x0488B21E</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xpub</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_formats_de_cl√©">Formats de cl√©</h4>
<div class="paragraph">
<p> Les cl√©s priv√©es et publiques peuvent √™tre repr√©sent√©es dans un certain nombre de formats diff√©rents. Ces repr√©sentations codent tous le m√™me nombre, m√™me si elles semblent diff√©rentes. Ces formats sont principalement utilis√©s pour faciliter la lecture et la transcription des cl√©s sans introduire d&#8217;erreurs.</p>
</div>
<div class="sect4">
<h5 id="priv_formats">Formats de cl√© priv√©e</h5>
<div class="paragraph">
<p> La cl√© priv√©e peut √™tre repr√©sent√©e dans un certain nombre de formats diff√©rents, qui correspondent tous au m√™me nombre de 256 bits. <a href="#table_4-2">Repr√©sentations de cl√©s priv√©es (formats d&#8217;encodage)</a> montre trois formats courants utilis√©s pour repr√©senter les cl√©s priv√©es. Diff√©rents formats sont utilis√©s dans diff√©rentes circonstances. Les formats binaires hexad√©cimaux et bruts sont utilis√©s en interne dans les logiciels et rarement montr√©s aux utilisateurs. Le WIF est utilis√© pour l&#8217;importation/exportation de cl√©s entre portefeuilles et souvent utilis√© dans les repr√©sentations de code QR (code-barres) des cl√©s priv√©es.</p>
</div>
<table id="table_4-2" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Repr√©sentations de cl√©s priv√©es (formats d&#8217;encodage)</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Pr√©fixe</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Brut</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32 octets</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hex</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aucun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64 chiffres hexad√©cimaux</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WIF</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Encodage Base58Check¬†: Base58 avec pr√©fixe de version 0x80 et somme de contr√¥le de 4¬†octets</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WIF compress√©</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">K ou L</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comme ci-dessus, avec le suffixe ajout√© 0x01 avant l&#8217;encodage</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a href="#table_4-3">Exemple¬†: m√™me cl√©, diff√©rents formats</a> affiche la cl√© priv√©e g√©n√©r√©e dans ces trois formats.</p>
</div>
<table id="table_4-3" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Exemple¬†: m√™me cl√©, diff√©rents formats</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Format</th>
<th class="tableblock halign-left valign-top">Cl√© priv√©e</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hex</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1e99423a4ed27608a15a2616a2b0e9e52ced330ac530edcc32c8ffc6a526aedd</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WIF</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5J3mBbAH58CpQ3Y5RNJpUKPE62SQ5tfcvU2JpbnkeyhfsYB1Jcn</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WIF compress√©</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">KxFC1jmwwCoACiCAWZ3eXa96mBM6tb3TYzGmf6YwgdGWZgawvrtJ</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Toutes ces repr√©sentations sont des mani√®res diff√©rentes de montrer le m√™me num√©ro, la m√™me cl√© priv√©e. Ils semblent diff√©rents, mais n&#8217;importe quel format peut facilement √™tre converti en n&#8217;importe quel autre format. Notez que le "binaire brut" n&#8217;est pas affich√© dans <a href="#table_4-3">Exemple¬†: m√™me cl√©, diff√©rents formats</a> car tout encodage √† afficher ici ne serait, par d√©finition, pas une donn√©e binaire brute.</p>
</div>
<div class="paragraph">
<p>Nous utilisons la commande <code>wif-to-ec</code> de Bitcoin Explorer (voir <a href="#appdx_bx">[appdx_bx]</a>) pour montrer que les deux cl√©s WIF repr√©sentent la m√™me cl√© priv√©e¬†:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ bx wif-to-ec 5J3mBbAH58CpQ3Y5RNJpUKPE62SQ5tfcvU2JpbnkeyhfsYB1Jcn
1e99423a4ed27608a15a2616a2b0e9e52ced330ac530edcc32c8ffc6a526aedd

$ bx wif-to-ec KxFC1jmwwCoACiCAWZ3eXa96mBM6tb3TYzGmf6YwgdGWZgawvrtJ
1e99423a4ed27608a15a2616a2b0e9e52ced330ac530edcc32c8ffc6a526aedd</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_d√©coder_√†_partir_de_base58check">D√©coder √† partir de Base58Check</h5>
<div class="paragraph">
<p>Les commandes de Bitcoin Explorer (voir <a href="#appdx_bx">[appdx_bx]</a>) facilitent l&#8217;√©criture de scripts interface syst√®me (ou shell) √† l&#8217;aide d'"op√©rateurs de transfert de donn√©es" en ligne de commande (ou "command-line pipes") qui manipulent les cl√©s, les adresses et les transactions bitcoin. Vous pouvez utiliser Bitcoin Explorer pour d√©coder le format Base58Check sur la ligne de commande.</p>
</div>
<div class="paragraph">
<p>Nous utilisons la commande <code>base58check-decode</code> pour d√©coder la cl√© non compress√©e¬†:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ bx base58check-decode 5J3mBbAH58CpQ3Y5RNJpUKPE62SQ5tfcvU2JpbnkeyhfsYB1Jcn
wrapper
{
    checksum 4286807748
    payload 1e99423a4ed27608a15a2616a2b0e9e52ced330ac530edcc32c8ffc6a526aedd
    version 128
}</pre>
</div>
</div>
<div class="paragraph">
<p>Le r√©sultat contient la cl√© comme charge utile (payload), le pr√©fixe de version WIF 128 et une somme de contr√¥le (checksum).</p>
</div>
<div class="paragraph">
<p>Notez que la "charge utile" (ou "payload") de la cl√© compress√©e est ajout√©e avec le suffixe 01, signalant que la cl√© publique d√©riv√©e doit √™tre compress√©e¬†:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ bx base58check-decode KxFC1jmwwCoACiCAWZ3eXa96mBM6tb3TYzGmf6YwgdGWZgawvrtJ
wrapper
{
    checksum 2339607926
    payload 1e99423a4ed27608a15a2616a2b0e9e52ced330ac530edcc32c8ffc6a526aedd01
    version 128
}</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_encoder_de_lhex_vers_base58check">Encoder de l&#8217;hex vers Base58Check</h5>
<div class="paragraph">
<p>Pour encoder en Base58Check (l&#8217;inverse de la commande pr√©c√©dente), nous utilisons la commande <code>base58check-encode</code> de Bitcoin Explorer (voir <a href="#appdx_bx">[appdx_bx]</a>) et indiquez la cl√© priv√©e hexad√©cimale, suivie du pr√©fixe de version WIF¬†128¬†:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>bx base58check-encode 1e99423a4ed27608a15a2616a2b0e9e52ced330ac530edcc32c8ffc6a526aedd --version 128
5J3mBbAH58CpQ3Y5RNJpUKPE62SQ5tfcvU2JpbnkeyhfsYB1Jcn</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_encoder_de_lhex_cl√©_compress√©e_√†_base58check">Encoder de l&#8217;hex (cl√© compress√©e) √† Base58Check</h5>
<div class="paragraph">
<p>Pour encoder dans Base58Check comme une cl√© priv√©e "compress√©e" (voir <a href="#comp_priv">Cl√©s priv√©es compress√©es</a>), nous ajoutons le suffixe <code>01</code> √† la cl√© hexad√©cimale puis encodons comme dans la section pr√©c√©dente¬†:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ bx base58check-encode 1e99423a4ed27608a15a2616a2b0e9e52ced330ac530edcc32c8ffc6a526aedd01 --version 128
KxFC1jmwwCoACiCAWZ3eXa96mBM6tb3TYzGmf6YwgdGWZgawvrtJ</pre>
</div>
</div>
<div class="paragraph">
<p>Le format compress√© WIF r√©sultant commence par un "K". Cela indique que la cl√© priv√©e √† l&#8217;int√©rieur a un suffixe de "01" et sera utilis√©e pour produire des cl√©s publiques compress√©es uniquement (voir <a href="#comp_pub">Cl√©s publiques compress√©es</a>).</p>
</div>
</div>
<div class="sect4">
<h5 id="_formats_de_cl√©_publique">Formats de cl√© publique</h5>
<div class="paragraph">
<p>Les cl√©s publiques sont √©galement pr√©sent√©es de diff√©rentes mani√®res, g√©n√©ralement sous forme de cl√©s publiques <em>compress√©es</em> ou <em>non compress√©es</em>.</p>
</div>
<div class="paragraph">
<p>Comme nous l&#8217;avons vu pr√©c√©demment, la cl√© publique est un point de la courbe elliptique constitu√© d&#8217;un couple de coordonn√©es (x,y). Il est g√©n√©ralement pr√©sent√© avec le pr√©fixe <code>04</code> suivi de deux nombres de 256 bits¬†: un pour la coordonn√©e <em>x</em> du point, l&#8217;autre pour la coordonn√©e <em>y</em>. Le pr√©fixe <code>04</code> est utilis√© pour distinguer les cl√©s publiques non compress√©es des cl√©s publiques compress√©es qui commencent par un <code>02</code> ou un 03.</p>
</div>
<div class="paragraph">
<p>Voici la cl√© publique g√©n√©r√©e par la cl√© priv√©e que nous avons cr√©√©e pr√©c√©demment, indiqu√©e par les coordonn√©es <code>x</code> et y¬†:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>x = F028892BAD7ED57D2FB57BF33081D5CFCF6F9ED3D3D7F159C2E2FFF579DC341A
y = 07CF33DA18BD734C600B96A72BBC4749D5141C90EC8AC328AE52DDFE2E505BDB</pre>
</div>
</div>
<div class="paragraph">
<p>Voici la m√™me cl√© publique affich√©e sous la forme d&#8217;un nombre de 520¬†bits (130 chiffres hexad√©cimaux) avec le pr√©fixe <code>04</code> suivi de <code>x</code> puis des coordonn√©es y, sous la forme 04 x y¬†:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>K = 04F028892BAD7ED57D2FB57BF33081D5CFCF6F9ED3D3D7F159C2E2FFF579DC341A&amp;#x21b5;
07CF33DA18BD734C600B96A72BBC4749D5141C90EC8AC328AE52DDFE2E505BDB</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="comp_pub">Cl√©s publiques compress√©es</h5>
<div class="paragraph">
<p>Des cl√©s publiques compress√©es ont √©t√© introduites dans le bitcoin pour r√©duire la taille des transactions et √©conomiser de l&#8217;espace disque sur les n≈ìuds qui stockent la base de donn√©es de la cha√Æne de blocs Bitcoin. La plupart des transactions incluent la cl√© publique, qui est n√©cessaire pour valider les informations d&#8217;identification du propri√©taire et d√©penser le bitcoin. Chaque cl√© publique n√©cessite 520 bits (pr√©fixe ` x ` y), ce qui, multipli√© par plusieurs centaines de transactions par bloc, soit des dizaines de milliers de transactions par jour, ajoute une quantit√© importante de donn√©es √† la cha√Æne de blocs.</p>
</div>
<div class="paragraph">
<p>Comme nous l&#8217;avons vu dans la section <a href="#pubkey">Cl√©s publiques</a>, une cl√© publique est un point (x,y) sur une courbe elliptique. Parce que la courbe exprime une fonction math√©matique, un point sur la courbe repr√©sente une solution √† l&#8217;√©quation et, par cons√©quent, si nous connaissons la coordonn√©e <em>x</em>, nous pouvons calculer la coordonn√©e <em>y</em> en r√©solvant l&#8217;√©quation y<sup>2</sup> mod p = (x<sup>3</sup> + 7) mod p. Cela nous permet de stocker uniquement la coordonn√©e <em>x</em> du point de cl√© publique, en omettant la coordonn√©e <em>y</em> et en r√©duisant la taille de la cl√© et l&#8217;espace requis pour la stocker de 256 bits. Une r√©duction de pr√®s de 50¬†% de la taille de chaque transaction repr√©sente une grande quantit√© de donn√©es enregistr√©es au fil du temps¬†!</p>
</div>
<div class="paragraph">
<p>Alors que les cl√©s publiques non compress√©es ont un pr√©fixe de 04, les cl√©s publiques compress√©es commencent par un pr√©fixe <code>02</code> ou 03. Regardons pourquoi il y a deux pr√©fixes possibles¬†: parce que le c√¥t√© gauche de l&#8217;√©quation est <em>y</em><sup>2</sup>, la solution pour <em>y</em> est une racine carr√©e, qui peut avoir une valeur positive ou n√©gative. Visuellement, cela signifie que la coordonn√©e <em>y</em> r√©sultante peut √™tre au-dessus ou au-dessous de l&#8217;axe des x. Comme vous pouvez le voir sur le graphique de la courbe elliptique en <a href="#ecc-curve">Une courbe elliptique</a>, la courbe est sym√©trique, c&#8217;est-√†-dire qu&#8217;elle est r√©fl√©chie comme par un miroir √† l&#8217;axe des abscisses. Ainsi, bien que nous puissions omettre la coordonn√©e <em>y</em>, nous devons stocker le <em>signe</em> de <em>y</em> (positif ou n√©gatif)¬†; ou en d&#8217;autres termes, nous devons nous rappeler si c&#8217;√©tait au-dessus ou au-dessous de l&#8217;axe des x parce que chacune de ces options repr√©sente un point diff√©rent et une cl√© publique diff√©rente. Lors du calcul de la courbe elliptique en arithm√©tique binaire sur le corps fini d&#8217;ordre premier p, la coordonn√©e <em>y</em> est paire ou impaire, ce qui correspond au signe positif/n√©gatif comme expliqu√© pr√©c√©demment. Ainsi, pour distinguer les deux valeurs possibles de <em>y</em>, on stocke une cl√© publique compress√©e avec le pr√©fixe <code>02</code> si le <em>y</em> est pair, et <code>03</code> s&#8217;il est impair, permettant au logiciel de d√©duire correctement la coordonn√©e <em>y</em> de la coordonn√©e <em>x</em> et de d√©compresser la cl√© publique aux coordonn√©es compl√®tes du point. La compression de cl√© publique est illustr√©e dans <a href="#pubkey_compression">Compression de cl√© publique</a>.</p>
</div>
<div class="paragraph">
<p>Voici la m√™me cl√© publique g√©n√©r√©e pr√©c√©demment, pr√©sent√©e sous la forme d&#8217;une cl√© publique compress√©e stock√©e sur 264¬†bits (66¬†chiffres hexad√©cimaux) avec le pr√©fixe <code>03</code> indiquant que la coordonn√©e <em>y</em> est impaire¬†:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>K = 03F028892BAD7ED57D2FB57BF33081D5CFCF6F9ED3D3D7F159C2E2FFF579DC341A</pre>
</div>
</div>
<div class="paragraph">
<p>Cette cl√© publique compress√©e correspond √† la m√™me cl√© priv√©e, c&#8217;est-√†-dire qu&#8217;elle est g√©n√©r√©e √† partir de la m√™me cl√© priv√©e. Cependant, il semble diff√©rent de la cl√© publique non compress√©e. Plus important encore, si nous convertissons cette cl√© publique compress√©e en une adresse Bitcoin √† l&#8217;aide de la fonction de double hachage (RIPEMD160(SHA256(K))), cela produira une adresse Bitcoin <em>diff√©rente</em>. Cela peut pr√™ter √† confusion, car cela signifie qu&#8217;une seule cl√© priv√©e peut produire une cl√© publique exprim√©e dans deux formats diff√©rents (compress√© et non compress√©) qui produisent deux adresses Bitcoin diff√©rentes. Cependant, la cl√© priv√©e est identique pour les deux adresses Bitcoin.</p>
</div>
<div id="pubkey_compression" class="imageblock smallerseventy">
<div class="content">
<img src="images/mbc2_0407.png" alt="Compression de pubkey">
</div>
<div class="title">Figure 7. Compression de cl√© publique</div>
</div>
<div class="paragraph">
<p>Les cl√©s publiques compress√©es deviennent progressivement la valeur par d√©faut pour les clients Bitcoin, ce qui a un impact significatif sur la r√©duction de la taille des transactions et donc de la cha√Æne de blocs. Cependant, tous les clients ne prennent pas encore en charge les cl√©s publiques compress√©es. Les clients plus r√©cents qui prennent en charge les cl√©s publiques compress√©es doivent comptabiliser les transactions des clients plus anciens qui ne prennent pas en charge les cl√©s publiques compress√©es. Ceci est particuli√®rement important lorsqu&#8217;une application de portefeuille importe des cl√©s priv√©es √† partir d&#8217;une autre application de portefeuille bitcoin, car le nouveau portefeuille doit analyser la cha√Æne de blocs pour trouver les transactions correspondant √† ces cl√©s import√©es. Quelles adresses Bitcoin le portefeuille Bitcoin doit-il rechercher ? Les adresses Bitcoin produites par des cl√©s publiques non compress√©es, ou les adresses Bitcoin produites par des cl√©s publiques compress√©es ? Les deux sont des adresses Bitcoin valides et peuvent √™tre sign√©es par la cl√© priv√©e, mais ce sont des adresses diff√©rentes !</p>
</div>
<div class="paragraph">
<p>Pour r√©soudre ce probl√®me, lorsque des cl√©s priv√©es sont export√©es depuis un portefeuille, le WIF utilis√© pour les repr√©senter est impl√©ment√© diff√©remment dans les nouveaux portefeuilles Bitcoin, pour indiquer que ces cl√©s priv√©es ont √©t√© utilis√©es pour produire des cl√©s publiques <em>compress√©es</em> et donc des adresses Bitcoin <em>compress√©es</em>. Cela permet au portefeuille importateur de faire la distinction entre les cl√©s priv√©es provenant de portefeuilles plus anciens ou plus r√©cents et de rechercher dans la cha√Æne de blocs des transactions avec des adresses Bitcoin correspondant respectivement aux cl√©s publiques non compress√©es ou compress√©es. Voyons comment cela fonctionne plus en d√©tail, dans la section suivante.</p>
</div>
</div>
<div class="sect4">
<h5 id="comp_priv">Cl√©s priv√©es compress√©es</h5>
<div class="paragraph">
<p>Ironiquement, le terme "cl√© priv√©e compress√©e" est un abus de langage, car lorsqu&#8217;une cl√© priv√©e est export√©e au format WIF compress√©, elle est en fait un octet <em>plus long</em> qu&#8217;une cl√© priv√©e "non compress√©e". C&#8217;est parce que la cl√© priv√©e a un suffixe d&#8217;un octet ajout√© (affich√© comme 01 en hexad√©cimal dans <a href="#table_4-4">Exemple¬†: m√™me cl√©, diff√©rents formats</a>), ce qui signifie que la cl√© priv√©e provient d&#8217;un portefeuille plus r√©cent et ne doit √™tre utilis√©e que pour produire des cl√©s publiques compress√©es. Les cl√©s priv√©es ne sont pas elles-m√™mes compress√©es et ne peuvent pas √™tre compress√©es. Le terme "cl√© priv√©e compress√©e" signifie en r√©alit√© "cl√© priv√©e √† partir de laquelle seules les cl√©s publiques compress√©es doivent √™tre d√©riv√©es", tandis que "cl√© priv√©e non compress√©e" signifie en r√©alit√© "cl√© priv√©e √† partir de laquelle seules les cl√©s publiques non compress√©es doivent √™tre d√©riv√©es". Vous devez uniquement faire r√©f√©rence au format d&#8217;exportation en tant que "WIF-compress√©" ou "WIF" et ne pas faire r√©f√©rence √† la cl√© priv√©e elle-m√™me en tant que "compress√©e" pour √©viter toute confusion suppl√©mentaire.</p>
</div>
<div class="paragraph">
<p><a href="#table_4-4">Exemple¬†: m√™me cl√©, diff√©rents formats</a> affiche la m√™me cl√©, encod√©e aux formats WIF et WIF compress√©.</p>
</div>
<table id="table_4-4" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. Exemple¬†: m√™me cl√©, diff√©rents formats</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Format</th>
<th class="tableblock halign-left valign-top">Cl√© priv√©e</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hex</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1E99423A4ED27608A15A2616A2B0E9E52CED330AC530EDCC32C8FFC6A526AEDD</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WIF</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5J3mBbAH58CpQ3Y5RNJpUKPE62SQ5tfcvU2JpbnkeyhfsYB1Jcn</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hex-compress√©</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1E99423A4ED27608A15A2616A2B0E9E52CED330AC530EDCC32C8FFC6A526AEDD01</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WIF compress√©</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">KxFC1jmwwCoACiCAWZ3eXa96mBM6tb3TYzGmf6YwgdGWZgawvrtJ</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Notez que le format de cl√© priv√©e compress√©e en hexad√©cimal a un octet suppl√©mentaire √† la fin (01 en hexad√©cimal). Bien que le pr√©fixe de version Base58Check soit le m√™me (0x80) pour les formats WIF et WIF compress√©s, l&#8217;ajout d&#8217;un octet √† la fin du num√©ro fait passer le premier caract√®re de l&#8217;encodage Base58 de 5 √† <em>K</em> ou <em>L</em> . Consid√©rez cela comme l&#8217;√©quivalent Base58 de la diff√©rence de codage d√©cimal entre le nombre 100 et le nombre 99. Alors que 100 est un chiffre plus long que 99, il a √©galement un pr√©fixe de 1 au lieu d&#8217;un pr√©fixe de 9. Lorsque la longueur change, il affecte le pr√©fixe. En Base58, le pr√©fixe 5 se transforme en <em>K</em> ou <em>L</em> lorsque la longueur du nombre augmente d&#8217;un octet.</p>
</div>
<div class="paragraph">
<p>N&#8217;oubliez pas que ces formats ne sont <em>pas</em> utilis√©s de mani√®re interchangeable. Dans un portefeuille plus r√©cent qui impl√©mente des cl√©s publiques compress√©es, les cl√©s priv√©es ne seront export√©es qu&#8217;au format WIF compress√© (avec un pr√©fixe <em>K</em> ou <em>L</em>). Si le portefeuille est une impl√©mentation plus ancienne et n&#8217;utilise pas de cl√©s publiques compress√©es, les cl√©s priv√©es ne seront export√©es qu&#8217;au format WIF (avec un pr√©fixe 5). Le but ici est de signaler au portefeuille qui importe ces cl√©s priv√©es s&#8217;il doit rechercher dans la cha√Æne de blocs des cl√©s et des adresses publiques compress√©es ou non.</p>
</div>
<div class="paragraph">
<p>Si un portefeuille bitcoin est capable d&#8217;impl√©menter des cl√©s publiques compress√©es, il les utilisera dans toutes les transactions. Les cl√©s priv√©es du portefeuille seront utilis√©es pour d√©river les points de cl√© publique sur la courbe, qui seront compress√©s. Les cl√©s publiques compress√©es seront utilis√©es pour produire des adresses Bitcoin et celles-ci seront utilis√©es dans les transactions. Lors de l&#8217;exportation de cl√©s priv√©es √† partir d&#8217;un nouveau portefeuille qui impl√©mente des cl√©s publiques compress√©es, le WIF est modifi√©, avec l&#8217;ajout d&#8217;un suffixe d&#8217;un octet <code>01</code> √† la cl√© priv√©e. La cl√© priv√©e encod√©e en Base58Check qui en r√©sulte est appel√©e "WIF compress√©" et commence par la lettre <em>K</em> ou <em>L</em>, au lieu de commencer par "5" comme c&#8217;est le cas avec les cl√©s encod√©es en WIF (non compress√©es) des portefeuilles plus anciens.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>"Cl√©s priv√©es compress√©es" est un terme impropre¬†! Ils ne sont pas compress√©s ; au lieu de cela, WIF-compress√© signifie que les cl√©s ne doivent √™tre utilis√©es que pour d√©river des cl√©s publiques compress√©es et leurs adresses Bitcoin correspondantes. Ironiquement, une cl√© priv√©e cod√©e "compress√©e en WIF" est plus longue d&#8217;un octet car elle a le suffixe <code>01</code> ajout√© pour la distinguer d&#8217;une cl√© "non compress√©e".</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_impl√©mentation_des_cl√©s_et_des_adresses_dans_c">Impl√©mentation des cl√©s et des adresses dans C++</h3>
<div class="paragraph">
<p>Regardons le processus complet de cr√©ation d&#8217;une adresse Bitcoin, d&#8217;une cl√© priv√©e, √† une cl√© publique (un point sur la courbe elliptique), √† une adresse √† hachage double, et enfin, l&#8217;encodage Base58Check. Le code C++ dans <a href="#addr_example">Cr√©ation d&#8217;une adresse Bitcoin encod√©e en Base58Check √† partir d&#8217;une cl√© priv√©e</a> montre le processus complet √©tape par √©tape, de la cl√© priv√©e √† l&#8217;adresse Bitcoin encod√©e en Base58Check. L&#8217;exemple de code utilise la biblioth√®que libbitcoin introduite dans <a href="#alt_libraries">[alt_libraries]</a> pour certaines fonctions d&#8217;assistance.</p>
</div>
<div id="addr_example" class="exampleblock">
<div class="title">Example 3. Cr√©ation d&#8217;une adresse Bitcoin encod√©e en Base58Check √† partir d&#8217;une cl√© priv√©e</div>
<div class="content">
<div class="listingblock c_less_space">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">#include &lt;bitcoin/bitcoin.hpp&gt;

int main()
{
    // Cha√Æne de cl√© secr√®te priv√©e en base16
    bc::ec_secret decoded;
    bc::decode_base16(decoded,
        "038109007313a5807b2eccc082c8c3fbb988a973cacf1a7df9ce725c31b14776");

    bc::wallet::ec_private secret(
        decoded, bc::wallet::ec_private::mainnet_p2kh);

    // Obtenir la cl√© publique.
    bc::wallet::ec_public public_key(secret);
    std::cout &lt;&lt; "Public key: " &lt;&lt; public_key.encoded() &lt;&lt; std::endl;

    // Cr√©er une adresse Bitcoin.
    // Normalement, vous pouvez utiliser :
    //    bc::wallet::payment_address payaddr =
    //        public_key.to_payment_address(
    //            bc::wallet::ec_public::mainnet_p2kh);
    //  const std::string address = payaddr.encoded();

    // Calcule le hachage de la cl√© publique pour l'adresse P2PKH.
    bc::data_chunk public_key_data;
    public_key.to_data(public_key_data);
    const auto hash = bc::bitcoin_short_hash(public_key_data);

    bc::data_chunk unencoded_address;
    // R√©server 25 octets
    //   [ version:1  ]
    //   [ hash:20    ]
    //   [ checksum:4 ]
    unencoded_address.reserve(25);
    // Octet de version, 0 est l'adresse BTC normale (P2PKH).
    unencoded_address.push_back(0);
    // Donn√©es de hachage
    bc::extend_data(unencoded_address, hash);
    // La somme de contr√¥le est calcul√©e en hachant les donn√©es et en ajoutant 4 octets √† partir du hachage.
    bc::append_checksum(unencoded_address);
    // Enfin, nous devons encoder le r√©sultat dans l'encodage base58 de Bitcoin.
    assert(unencoded_address.size() == 25);
    const std::string address = bc::encode_base58(unencoded_address);

    std::cout &lt;&lt; "Address: " &lt;&lt; address &lt;&lt; std::endl;
    return 0;
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Le code utilise une cl√© priv√©e pr√©d√©finie pour produire la m√™me adresse Bitcoin √† chaque ex√©cution, comme indiqu√© dans <a href="#addr_example_run">Compilation et ex√©cution du code addr</a>.</p>
</div>
<div id="addr_example_run" class="exampleblock">
<div class="title">Example 4. Compilation et ex√©cution du code addr</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># Compiler le code addr.cpp
$ g++ -o addr addr.cpp -std=c++11 $(pkg-config --cflags --libs libbitcoin)
# Lancer l'ex√©cutable addr
$ ./addr
Public key: 0202a406624211f2abbdc68da3df929f938c3399dd79fac1b51b0e4ad1d26a47aa
Address: 1PRTTaJesdNovgne6Ehcdu1fpEdX7913CK</code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>Le code dans <a href="#addr_example_run">Compilation et ex√©cution du code addr</a> produit une adresse Bitcoin (1PRTT...) √† partir d&#8217;une cl√© publique <em>compress√©e</em> (voir <a href="#comp_pub">Cl√©s publiques compress√©es</a>). Si vous utilisiez la cl√© publique non compress√©e √† la place, cela produirait une adresse Bitcoin diff√©rente (14K1y...).</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_impl√©menter_des_cl√©s_et_des_adresses_en_python">Impl√©menter des cl√©s et des adresses en Python</h3>
<div class="paragraph">
<p> La biblioth√®que bitcoin la plus compl√®te en Python est <a href="https://github.com/vbuterin/pybitcointools">pybitcointools</a> par Vitalik Buterin. Dans <a href="#key-to-address_script">G√©n√©ration et formatage de cl√©s et d&#8217;adresses avec la biblioth√®que pybitcointools</a>, nous utilisons la biblioth√®que pybitcointools (import√©e en tant que "bitcoin") pour g√©n√©rer et afficher des cl√©s et des adresses dans diff√©rents formats.</p>
</div>
<div id="key-to-address_script" class="exampleblock">
<div class="title">Example 5. G√©n√©ration et formatage de cl√©s et d&#8217;adresses avec la biblioth√®que pybitcointools</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">import bitcoin

# G√©n√©rer une cl√© priv√©e al√©atoire
valid_private_key = False
while not valid_private_key:
    private_key = bitcoin.random_key()
    decoded_private_key = bitcoin.decode_privkey(private_key, 'hex')
    valid_private_key =  0 &lt; decoded_private_key &lt; bitcoin.N

print "Private Key (hex) is: ", private_key
print "Private Key (decimal) is: ", decoded_private_key

# Convertir la cl√© priv√©e au format WIF
wif_encoded_private_key = bitcoin.encode_privkey(decoded_private_key, 'wif')
print "Private Key (WIF) is: ", wif_encoded_private_key

# Ajouter le suffixe "01" pour indiquer une cl√© priv√©e compress√©e
compressed_private_key = private_key + '01'
print "Private Key Compressed (hex) is: ", compressed_private_key

# G√©n√©rer un format WIF √† partir de la cl√© priv√©e compress√©e (WIF-compress√©)
wif_compressed_private_key = bitcoin.encode_privkey(
    bitcoin.decode_privkey(compressed_private_key, 'hex'), 'wif')
print "Private Key (WIF-Compressed) is: ", wif_compressed_private_key

# Multipliez le point g√©n√©rateur EC G avec la cl√© priv√©e pour obtenir un point de cl√© publique
public_key = bitcoin.fast_multiply(bitcoin.G, decoded_private_key)
print "Public Key (x,y) coordinates is:", public_key

# Encoder en hexad√©cimal, pr√©fixe 04
hex_encoded_public_key = bitcoin.encode_pubkey(public_key,'hex')
print "Public Key (hex) is:", hex_encoded_public_key

# Compressez la cl√© publique, ajustez le pr√©fixe selon que y est pair ou impair
(public_key_x, public_key_y) = public_key
if (public_key_y % 2) == 0:
    compressed_prefix = '02'
else:
    compressed_prefix = '03'
hex_compressed_public_key = compressed_prefix + bitcoin.encode(public_key_x, 16)
print "Compressed Public Key (hex) is:", hex_compressed_public_key

# G√©n√©rer une adresse bitcoin √† partir de la cl√© publique
print "Bitcoin Address (b58check) is:", bitcoin.pubkey_to_address(public_key)

# G√©n√©rer une adresse bitcoin compress√©e √† partir d'une cl√© publique compress√©e
print "Compressed Bitcoin Address (b58check) is:", \
    bitcoin.pubkey_to_address(hex_compressed_public_key)</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><a href="#key-to-address_script_run">Ex√©cution de key-to-address-ecc-example.py</a> affiche la sortie de l&#8217;ex√©cution de ce code.</p>
</div>
<div id="key-to-address_script_run" class="exampleblock">
<div class="title">Example 6. Ex√©cution de key-to-address-ecc-example.py</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre>$ python key-to-address-ecc-example.py
Private Key (hex) is:
 3aba4162c7251c891207b747840551a71939b0de081f85c4e44cf7c13e41daa6
Private Key (decimal) is:
 26563230048437957592232553826663696440606756685920117476832299673293013768870
Private Key (WIF) is:
 5JG9hT3beGTJuUAmCQEmNaxAuMacCTfXuw1R3FCXig23RQHMr4K
Private Key Compressed (hex) is:
 3aba4162c7251c891207b747840551a71939b0de081f85c4e44cf7c13e41daa601
Private Key (WIF-Compressed) is:
 KyBsPXxTuVD82av65KZkrGrWi5qLMah5SdNq6uftawDbgKa2wv6S
Public Key (x,y) coordinates is:
 (41637322786646325214887832269588396900663353932545912953362782457239403430124L,
 16388935128781238405526710466724741593761085120864331449066658622400339362166L)
Public Key (hex) is:
 045c0de3b9c8ab18dd04e3511243ec2952002dbfadc864b9628910169d9b9b00ec&amp;#x21b5;
243bcefdd4347074d44bd7356d6a53c495737dd96295e2a9374bf5f02ebfc176
Compressed Public Key (hex) is:
 025c0de3b9c8ab18dd04e3511243ec2952002dbfadc864b9628910169d9b9b00ec
Bitcoin Address (b58check) is:
 1thMirt546nngXqyPEz532S8fLwbozud8
Compressed Bitcoin Address (b58check) is:
 14cxpo3MBCYYWCgF74SWTdcmxipnGUsPw3</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><a href="#ec_math">Un script d√©montrant les math√©matiques de la courbe elliptique utilis√©es pour les cl√©s bitcoin</a> est un autre exemple, utilisant la biblioth√®que Python ECDSA pour les math√©matiques de la courbe elliptique et sans utiliser de biblioth√®ques bitcoin sp√©cialis√©es.</p>
</div>
<div id="ec_math" class="exampleblock">
<div class="title">Example 7. Un script d√©montrant les math√©matiques de la courbe elliptique utilis√©es pour les cl√©s bitcoin</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">import ecdsa
import os
from ecdsa.util import string_to_number, number_to_string

# secp256k1, http://www.oid-info.com/get/1.3.132.0.10
_p = 0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2FL
_r = 0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141L
_b = 0x0000000000000000000000000000000000000000000000000000000000000007L
_a = 0x0000000000000000000000000000000000000000000000000000000000000000L
_Gx = 0x79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798L
_Gy = 0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8L
curve_secp256k1 = ecdsa.ellipticcurve.CurveFp(_p, _a, _b)
generator_secp256k1 = ecdsa.ellipticcurve.Point(curve_secp256k1, _Gx, _Gy, _r)
oid_secp256k1 = (1, 3, 132, 0, 10)
SECP256k1 = ecdsa.curves.Curve("SECP256k1", curve_secp256k1, generator_secp256k1, oid_secp256k1) 
ec_order = _r

curve = curve_secp256k1
generator = generator_secp256k1

def random_secret():
    convert_to_int = lambda array: int("".join(array).encode("hex"), 16)
    
    # Collectez 256 bits de donn√©es al√©atoires √† partir du g√©n√©rateur al√©atoire cryptographiquement s√©curis√© du syst√®me d'exploitation
    byte_array = os.urandom(32)
    
    return convert_to_int(byte_array)

def get_point_pubkey(point):
    if point.y() &amp; 1:
        key = '03' + '%064x' % point.x()
    else:
        key = '02' + '%064x' % point.x()
    return key.decode('hex')

def get_point_pubkey_uncompressed(point):
    key = '04' + \
          '%064x' % point.x() + \
          '%064x' % point.y()
    return key.decode('hex')


# G√©n√©rez une nouvelle cl√© priv√©e.
secret = random_secret()
print "Secret: ", secret

# Obtenez le point de cl√© publique.
point = secret * generator
print "EC point:", point

print "BTC public key:", get_point_pubkey(point).encode("hex")

# √âtant donn√© le point (x, y), nous pouvons cr√©er l'objet en utilisant¬†:
point1 = ecdsa.ellipticcurve.Point(curve, point.x(), point.y(), ec_order)
assert point1 == point</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><a href="#ec_math_run">Installation de la biblioth√®que Python ECDSA et ex√©cution du script ec_math.py</a> affiche la sortie produite en ex√©cutant ce script.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p><a href="#ec_math">Un script d√©montrant les math√©matiques de la courbe elliptique utilis√©es pour les cl√©s bitcoin</a> utilise os.urandom, qui refl√®te un g√©n√©rateur de nombres al√©atoires cryptographiquement s√©curis√© (CSRNG) fourni par le syst√®me d&#8217;exploitation sous-jacent. Attention¬†: Selon le syst√®me d&#8217;exploitation, <code>os.urandom</code> peut <em>ne pas</em> √™tre impl√©ment√© avec une s√©curit√© suffisante ou correctement amorc√© et peut <em>ne pas</em> √™tre appropri√© pour g√©n√©rer des cl√©s bitcoin de qualit√© production.</p>
</div>
</td>
</tr>
</table>
</div>
<div id="ec_math_run" class="exampleblock">
<div class="title">Example 8. Installation de la biblioth√®que Python ECDSA et ex√©cution du script ec_math.py</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre># Installer le gestionnaire de packages Python PIP
$ sudo apt-get install python-pip
# Installer la biblioth√®que Python ECDSA
$ sudo pip install ecdsa
# Ex√©cuter le script
$ python ec-math.py
Secret:  38090835015954358862481132628887443905906204995912378278060168703580660294000
EC point: (70048853531867179489857750497606966272382583471322935454624595540007269312627, 105262206478686743191060800263479589329920209527285803935736021686045542353380)
BTC public key: 029ade3effb0a67d5c8609850d797366af428f4a0d5194cb221d807770a1522873</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_cl√©s_et_adresses_avanc√©es">Cl√©s et adresses avanc√©es</h3>
<div class="paragraph">
<p>Dans les sections suivantes, nous examinerons les formes avanc√©es de cl√©s et d&#8217;adresses, telles que les cl√©s priv√©es crypt√©es, les adresses de script et des multisignatures, les adresses personnalis√©es, et les portefeuilles en papier.</p>
</div>
<div class="sect3">
<h4 id="p2sh_addresses">Pay-to-Script Hash (P2SH) et adresses multisig</h4>
<div class="paragraph">
<p>("Pay-to-Script-Hash (P2SH)", "adresses multisig et")Comme nous le savons, les adresses Bitcoin traditionnelles commencent par le chiffre "1" et sont d√©riv√©es de la cl√© publique, qui est d√©riv√© de la cl√© priv√©e. Bien que n&#8217;importe qui puisse envoyer des bitcoins √† une adresse "1", ce bitcoin ne peut √™tre d√©pens√© qu&#8217;en pr√©sentant la signature de la cl√© priv√©e et la cl√© publique correspondantes.</p>
</div>
<div class="paragraph">
<p>Les adresses Bitcoin qui commencent par le chiffre "3" sont des adresses Pay-to-Script Hash (P2SH ou hachage de paiement-√†-script), parfois appel√©es √† tort adresses multisig ou adresses multisignatures. Ils d√©signent le b√©n√©ficiaire d&#8217;une transaction bitcoin comme le hachage d&#8217;un script, au lieu du propri√©taire d&#8217;une cl√© publique. La fonctionnalit√© a √©t√© introduite en janvier 2012 avec BIP-16 (voir <a href="#appdxbitcoinimpproposals">[appdxbitcoinimpproposals]</a>), et est largement adopt√© car il offre la possibilit√© d&#8217;ajouter des fonctionnalit√©s √† l&#8217;adresse elle-m√™me. Contrairement aux transactions qui "envoient" des fonds aux adresses Bitcoin traditionnelles "1", √©galement connues sous le nom de hachage de cl√© publique (P2PKH), les fonds envoy√©s aux adresses "3" n√©cessitent quelque chose de plus que la pr√©sentation d&#8217;une cl√© publique et une signature de cl√© priv√©e comme preuve de propri√©t√©. Les exigences sont d√©sign√©es au moment de la cr√©ation de l&#8217;adresse, dans le script, et toutes les entr√©es de cette adresse seront encombr√©es des m√™mes exigences.</p>
</div>
<div class="paragraph">
<p>Une adresse P2SH est cr√©√©e √† partir d&#8217;un script de transaction, qui d√©finit qui peut d√©penser une sortie de transaction (pour plus de d√©tails, voir <a href="#p2sh">[p2sh]</a>). L&#8217;encodage d&#8217;une adresse P2SH consiste √† utiliser la m√™me fonction de double hachage que celle utilis√©e lors de la cr√©ation d&#8217;une adresse Bitcoin, appliqu√©e uniquement sur le script √† la place de la cl√© publique :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>hachage de script = RIPEMD160(SHA256(script))</pre>
</div>
</div>
<div class="paragraph">
<p>Le "hachage de script" r√©sultant est encod√© avec Base58Check avec un pr√©fixe de version de 5, ce qui donne une adresse encod√©e commen√ßant par un 3. Un exemple d&#8217;adresse P2SH est 3F6i6kwkevjR7AsAd4te2YB2zZyASEm1HM, qui peut √™tre d√©riv√©e √† l&#8217;aide des commandes Bitcoin Explorer script-encode, sha256, <code>ripemd160</code> et <code>base58check-encode</code> (voir <a href="#appdx_bx">[appdx_bx]</a>) comme suit¬†:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ echo \
'DUP HASH160 [89abcdefabbaabbaabbaabbaabbaabbaabbaabba] EQUALVERIFY CHECKSIG' &gt; script
$ bx script-encode &lt; script | bx sha256 | bx ripemd160 \
| bx base58check-encode --version 5
3F6i6kwkevjR7AsAd4te2YB2zZyASEm1HM</pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>P2SH n&#8217;est pas n√©cessairement la m√™me chose qu&#8217;une transaction standard multisignature. Une adresse P2SH repr√©sente <em>le plus souvent</em> un script multi-signatures, mais elle peut √©galement repr√©senter un script codant d&#8217;autres types de transactions.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_adresses_multisignatures_et_p2sh">Adresses multisignatures et P2SH</h5>
<div class="paragraph">
<p>Actuellement, l&#8217;impl√©mentation la plus courante de la fonction P2SH est le script d&#8217;adresse multisignature. Comme son nom l&#8217;indique, le script sous-jacent n√©cessite un nombre minimum de signatures pour prouver la propri√©t√© et donc d√©penser des fonds. La fonctionnalit√© de multisignature bitcoin est con√ßue pour exiger M signatures (√©galement appel√©es ¬´seuil¬ª) √† partir d&#8217;un total de N cl√©s, appel√©es multisig M-de-N, o√π M est √©gal ou inf√©rieur √† N. Par exemple , Bob le propri√©taire du caf√© de <a href="#ch01_intro_what_is_bitcoin">[ch01_intro_what_is_bitcoin]</a> pourrait utiliser une adresse multisignature n√©cessitant 1 sur 2 signatures d&#8217;une cl√© lui appartenant et d&#8217;une cl√© appartenant √† son ou sa conjointe, garantissant que l&#8217;un ou l&#8217;autre pourrait signer pour passer une sortie de transaction verrouill√©e √† cette adresse. Cela ressemblerait √† un ¬´compte conjoint¬ª tel qu&#8217;il est mis en ≈ìuvre dans les banques traditionnelles o√π l&#8217;un ou l&#8217;autre des conjoints peut d√©penser avec une seule signature. Gopesh, le concepteur Web pay√© par Bob pour cr√©er un site Web, pourrait avoir une adresse multisignature 2 sur 3 pour son entreprise qui garantit qu&#8217;aucun fonds ne peut √™tre d√©pens√© √† moins qu&#8217;au moins deux des partenaires commerciaux ne signent une transaction.</p>
</div>
<div class="paragraph">
<p>Nous explorerons comment cr√©er des transactions qui d√©pensent des fonds √† partir d&#8217;adresses P2SH (et multisignatures) dans <a href="#transactions">[transactions]</a>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_adresses_personnalis√©es">Adresses personnalis√©es</h4>
<div class="paragraph">
<p>Les adresses personnalis√©es sont des adresses Bitcoin valides qui contiennent des messages lisibles par l&#8217;homme. Par exemple, <code>1LoveBPzzD72PUXLzCkYAtGFYmK5vYNR33</code> est une adresse valide qui contient les lettres formant le mot "Love" comme les quatre premi√®res lettres Base58. Les adresses personnalis√©es n√©cessitent de g√©n√©rer et de tester des milliards de cl√©s priv√©es candidates, jusqu&#8217;√† ce qu&#8217;une adresse Bitcoin avec le mod√®le souhait√© soit trouv√©e. Bien qu&#8217;il y ait quelques optimisations dans l&#8217;algorithme de g√©n√©ration de vanit√©, le processus consiste essentiellement √† choisir une cl√© priv√©e au hasard, √† d√©river la cl√© publique, √† d√©river l&#8217;adresse Bitcoin et √† v√©rifier si elle correspond au mod√®le de vanit√© souhait√©, en r√©p√©tant des milliards de fois jusqu&#8217;√† ce qu&#8217;un correspondance est trouv√©e.</p>
</div>
<div class="paragraph">
<p>Une fois qu&#8217;une adresse personnalis√©e correspondant au mod√®le souhait√© est trouv√©e, la cl√© priv√©e dont elle est d√©riv√©e peut √™tre utilis√©e par le propri√©taire pour d√©penser des bitcoins exactement de la m√™me mani√®re que n&#8217;importe quelle autre adresse. Les adresses personnalis√©es ne sont ni moins ni plus s√©curis√©es que toute autre adresse. Ils d√©pendent de la m√™me cryptographie √† courbe elliptique (ECC) et SHA que toute autre adresse. Vous ne pouvez pas plus facilement trouver la cl√© priv√©e d&#8217;une adresse commen√ßant par un mod√®le de vanit√© que vous ne le pouvez de n&#8217;importe quelle autre adresse.</p>
</div>
<div class="paragraph">
<p>Dans <a href="#ch01_intro_what_is_bitcoin">[ch01_intro_what_is_bitcoin]</a>, nous avons pr√©sent√© Eugenia, directrice d&#8217;une association caritative pour enfants op√©rant aux Philippines. Disons qu&#8217;Eugenia organise une collecte de fonds en bitcoins et souhaite utiliser une adresse personnalis√©e Bitcoin pour faire conna√Ætre la collecte de fonds. Eugenia cr√©era une adresse de vanit√© qui commence par "1Kids" pour promouvoir la collecte de fonds caritative pour les enfants. Voyons comment cette adresse personnalis√©e sera cr√©√©e et ce que cela signifie pour la s√©curit√© de l&#8217;association caritative d&#8217;Eugenia.</p>
</div>
<div class="sect4">
<h5 id="_g√©n√©ration_dadresses_personnalis√©es">G√©n√©ration d&#8217;adresses personnalis√©es</h5>
<div class="paragraph">
<p>Il est important de r√©aliser qu&#8217;une adresse Bitcoin est simplement un nombre repr√©sent√© par des symboles dans l&#8217;alphabet Base58. La recherche d&#8217;un mod√®le comme "1Kids" peut √™tre consid√©r√©e comme la recherche d&#8217;une adresse comprise entre <code>1Kids1111111111111111111111111111</code> et 1Kidszzzzzzzzzzzzzzzzzzzzzzzzzz. Il y a environ 58 ^ 29 ^ (environ 1,4 * 10 ^ 51 ^) adresses dans cette plage, toutes commen√ßant par "1Kids". <a href="#table_4-11">La plage d&#8217;adresses personnalis√©es (ou de vanit√©s) commen√ßant par "1Kids"</a> affiche la plage d&#8217;adresses qui ont le pr√©fixe 1Kids.</p>
</div>
<table id="table_4-11" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. La plage d&#8217;adresses personnalis√©es (ou de vanit√©s) commen√ßant par "1Kids"</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>De</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1Kids11111111111111111111111111111</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1Kids11111111111111111111111111112</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1Kids11111111111111111111111111113</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">...</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>√Ä</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1Kidszzzzzzzzzzzzzzzzzzzzzzzzzzzzz</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Regardons le mod√®le "1Kids" comme un nombre et voyons √† quelle fr√©quence nous pourrions trouver ce mod√®le dans une adresse Bitcoin (voir <a href="#table_4-12">La fr√©quence d&#8217;un mod√®le de vanit√© (1KidsCharity) et le temps de recherche moyen sur un PC de bureau</a>). Un ordinateur de bureau moyen, sans aucun mat√©riel sp√©cialis√©, peut rechercher environ 100 000 cl√©s par seconde.</p>
</div>
<table id="table_4-12" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. La fr√©quence d&#8217;un mod√®le de vanit√© (1KidsCharity) et le temps de recherche moyen sur un PC de bureau</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Longueur</th>
<th class="tableblock halign-left valign-top">Motif</th>
<th class="tableblock halign-left valign-top">Fr√©quence</th>
<th class="tableblock halign-left valign-top">Temps de recherche moyen</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1K</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 sur 58 touches</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt; 1 millisecondes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1Ki</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 sur 3 364</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">50 millisecondes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1Kid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 sur 195 000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt; 2 secondes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1Kids</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 sur 11 millions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 minute</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1KidsC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 sur 656 millions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 heure</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1KidsCh</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 sur 38 milliards</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2 jours</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1KidsCha</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 sur 2,2 trillions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3‚Äì4 mois</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1KidsChar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 sur 128 billions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">13‚Äì18 ans</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1KidsChari</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 sur 7 quadrillions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">800 ans</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1KidsCharit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 sur 400 quadrillions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">46 000 ans</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1KidsCharity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 sur 23 quintillions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2,5 millions d&#8217;ann√©es</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Comme vous pouvez le voir, Eugenia ne cr√©era pas de sit√¥t l&#8217;adresse personnalis√©e "1KidsCharity", m√™me si elle avait acc√®s √† plusieurs milliers d&#8217;ordinateurs. Chaque caract√®re suppl√©mentaire augmente la difficult√© d&#8217;un facteur de 58. Les mod√®les de plus de sept caract√®res sont g√©n√©ralement trouv√©s par du mat√©riel sp√©cialis√©, tel que des ordinateurs de bureau personnalis√©s avec plusieurs GPU. Ce sont souvent des "plates-formes" de minage de bitcoin r√©utilis√©es qui ne sont plus rentables pour le minage de bitcoin mais peuvent √™tre utilis√©es pour trouver des adresses personnalis√©es. Les recherches d&#8217;adresse personnalis√©es (ou de vanit√©s) sur les syst√®mes GPU sont de plusieurs ordres de grandeur plus rapides que sur un processeur √† usage g√©n√©ral.</p>
</div>
<div class="paragraph">
<p>Une autre fa√ßon de trouver une adresse de vanit√© consiste √† sous-traiter le travail √† un groupe ou bassin de mineurs de vanit√©, comme le groupe sur <a href="https://vanitypool.appspot.com">Vanity Pool</a>. Un groupe ou bassin de ce type est un service qui permet √† ceux qui disposent de mat√©riel GPU de gagner des bitcoins en recherchant des adresses personnalis√©es pour les autres. Pour un petit paiement (0,01 bitcoin ou environ 5¬†$ au moment d&#8217;√©crire ces lignes), Eugenia peut externaliser la recherche d&#8217;une adresse personnalis√©e √† sept caract√®res et obtenir des r√©sultats en quelques heures au lieu d&#8217;avoir √† ex√©cuter une recherche de CPU pendant des mois.</p>
</div>
<div class="paragraph">
<p>G√©n√©rer une adresse personnalis√©e est un exercice de force brute¬†: essayez une cl√© al√©atoire, v√©rifiez l&#8217;adresse r√©sultante pour voir si elle correspond au mod√®le souhait√©, et r√©p√©tez jusqu&#8217;√† ce que vous r√©ussissiez. <a href="#vanity_miner_code">Mineur d&#8217;adresse personnalis√©es (ou de vanit√©)</a> montre un exemple de "mineur de vanit√©", un programme con√ßu pour trouver des adresses personnalis√©es, √©crit en C++. L&#8217;exemple utilise la biblioth√®que libbitcoin, que nous avons introduite dans <a href="#alt_libraries">[alt_libraries]</a>.</p>
</div>
<div id="vanity_miner_code" class="exampleblock">
<div class="title">Example 9. Mineur d&#8217;adresse personnalis√©es (ou de vanit√©)</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">#include &lt;random&gt;
#include &lt;bitcoin/bitcoin.hpp&gt;

// La cha√Æne que nous recherchons
const std::string search = "1kid";

// G√©n√©rer une cl√© secr√®te al√©atoire. Un 32 octets al√©atoires.
bc::ec_secret random_secret(std::default_random_engine&amp; engine);
// Extraire l'adresse Bitcoin d'un secret EC.
std::string bitcoin_address(const bc::ec_secret&amp; secret);
// Comparaison insensible √† la casse avec la cha√Æne de recherche.
bool match_found(const std::string&amp; address);

int main()
{
    // random_device sous Linux utilise "/dev/urandom"
    // ATTENTION¬†: selon la mise en ≈ìuvre, ce RNG peut ne pas √™tre suffisamment s√©curis√©¬†!
    // Ne pas utiliser les cl√©s personnalis√©es g√©n√©r√©es par cet exemple en production
    std::random_device random;
    std::default_random_engine engine(random());
    
    // Boucle en continu...
    while (true)
    {
        // G√©n√©rer un secret al√©atoire.
        bc::ec_secret secret = random_secret(engine);
        // Obtenez l'adresse.
        std::string address = bitcoin_address(secret);
        // Correspond-il √† votre cha√Æne de recherche¬†? (1kid)
        if (match_found(address))
        {
            // Succ√®s!
            std::cout &lt;&lt; "Found vanity address! " &lt;&lt; address &lt;&lt; std::endl;
            std::cout &lt;&lt; "Secret: " &lt;&lt; bc::encode_base16(secret) &lt;&lt; std::endl;
            return 0;
        }
    }
    // Ne devrait jamais arriver ici¬†!
    return 0;
}

bc::ec_secret random_secret(std::default_random_engine&amp; engine)
{
    // Cr√©er un nouveau secret...
    bc::ec_secret secret;
    // It√©rer sur chaque octet en d√©finissant une valeur al√©atoire...
    for (uint8_t&amp; byte: secret)
        byte = engine() % std::numeric_limits&lt;uint8_t&gt;::max();
    // Renvoyer le r√©sultat.
    return secret;
}

std::string bitcoin_address(const bc::ec_secret&amp; secret)
{
    // Convertir le secret en adresse de paiement
    bc::wallet::ec_private private_key(secret);
    bc::wallet::payment_address payaddr(private_key);
    // Retourner le formulaire encod√©.
    return payaddr.encoded();
}

bool match_found(const std::string&amp; address)
{
    auto addr_it = address.begin();
    // Parcourez la cha√Æne de recherche en la comparant au caract√®re minuscule de l'adresse fournie.
    for (auto it = search.begin(); it != search.end(); ++it, ++addr_it)
        if (*it != std::tolower(*addr_it))
            return false;
    // Fin de la cha√Æne de recherche atteinte, donc l'adresse correspond.
    return true;
}</code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p><a href="#vanity_miner_code">Mineur d&#8217;adresse personnalis√©es (ou de vanit√©)</a> utilise std::random_device. Selon l&#8217;impl√©mentation, cela peut refl√©ter un CSRNG fourni par le syst√®me d&#8217;exploitation sous-jacent. Dans le cas d&#8217;un syst√®me d&#8217;exploitation de type Unix tel que Linux, il tire de /dev/urandom. Le g√©n√©rateur de nombres al√©atoires utilis√© ici est √† des fins de d√©monstration n&#8217;est <em>pas</em> appropri√© pour g√©n√©rer des cl√©s bitcoin de qualit√© production car il n&#8217;est pas impl√©ment√© avec une s√©curit√© suffisante.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>L&#8217;exemple de code doit √™tre compil√© √† l&#8217;aide d&#8217;un compilateur C++ et li√© √† la biblioth√®que libbitcoin (qui doit d&#8217;abord √™tre install√©e sur ce syst√®me). Pour ex√©cuter l&#8217;exemple, lancez l&#8217;ex√©cutable vanity-miner sans param√®tres (voir <a href="#vanity_miner_run">Compilation et ex√©cution de l&#8217;exemple vanity-miner</a>) et il tentera de trouver une adresse personnalis√©e commen√ßant par "1kid".</p>
</div>
<div id="vanity_miner_run" class="exampleblock">
<div class="title">Example 10. Compilation et ex√©cution de l&#8217;exemple vanity-miner</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># Compiler le code avec g++
$ g++ -o vanity-miner vanity-miner.cpp $(pkg-config --cflags --libs libbitcoin)
# Ex√©cutez l'exemple
$ ./vanity-miner
Found vanity address! 1KiDzkG4MxmovZryZRj8tK81oQRhbZ46YT
Secret: 57cc268a05f83a23ac9d930bc8565bac4e277055f4794cbd1a39e5e71c038f3f
# Ex√©cutez-le √† nouveau pour un r√©sultat diff√©rent
$ ./vanity-miner
Found vanity address! 1Kidxr3wsmMzzouwXibKfwTYs5Pau8TUFn
Secret: 7f65bbbbe6d8caae74a0c6a0d2d7b5c6663d71b60337299a1a2cf34c04b2a623
# Utilisez "time" pour voir combien de temps il faut pour trouver un r√©sultat
$ time ./vanity-miner
Found vanity address! 1KidPWhKgGRQWD5PP5TAnGfDyfWp5yceXM
Secret: 2a802e7a53d8aa237cd059377b616d2bfcfa4b0140bc85fa008f2d3d4b225349

real	0m8.868s
user	0m8.828s
sys	0m0.035s</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>L&#8217;exemple de code prendra quelques secondes pour trouver une correspondance pour le mod√®le √† trois caract√®res "kid", comme nous pouvons le voir lorsque nous utilisons la commande Unix <code>time</code> pour mesurer le temps d&#8217;ex√©cution. Modifiez le mod√®le <code>search</code> dans le code source et voyez combien de temps cela prend pour les mod√®les √† quatre ou cinq caract√®res¬†!</p>
</div>
</div>
<div class="sect4">
<h5 id="_s√©curit√©_de_ladresse_personnalis√©e">S√©curit√© de l&#8217;adresse personnalis√©e</h5>
<div class="paragraph">
<p>Les adresses personnalis√©es peuvent √™tre utilis√©es pour am√©liorer <em>et</em> pour contourner les mesures de s√©curit√©¬†; ils sont vraiment une √©p√©e √† double tranchant. Utilis√©e pour am√©liorer la s√©curit√©, une adresse distinctive rend plus difficile pour les adversaires de substituer leur propre adresse et de tromper vos clients en les payant √† votre place. Malheureusement, les adresses personnalis√©es permettent √©galement √† quiconque de cr√©er une adresse qui <em>ressemble</em> √† n&#8217;importe quelle adresse al√©atoire, ou m√™me √† une autre adresse personnalis√©e, trompant ainsi vos clients.</p>
</div>
<div class="paragraph">
<p>Eugenia pourrait annoncer une adresse g√©n√©r√©e al√©atoirement (par exemple, 1J7mdg5rbQyUHENYdx39WVWK7fsLpEoXZy) √† laquelle les gens peuvent envoyer leurs dons. Ou, elle pourrait g√©n√©rer une adresse de vanit√© qui commence par 1Kids, pour la rendre plus distinctive.</p>
</div>
<div class="paragraph">
<p>Dans les deux cas, l&#8217;un des risques d&#8217;utiliser une seule adresse fixe (plut√¥t qu&#8217;une adresse dynamique distincte par donateur) est qu&#8217;un voleur puisse s&#8217;infiltrer dans votre site Web et le remplacer par sa propre adresse, d√©tournant ainsi les dons vers lui. Si vous avez annonc√© votre adresse de don √† plusieurs endroits diff√©rents, vos utilisateurs peuvent inspecter visuellement l&#8217;adresse avant d&#8217;effectuer un paiement pour s&#8217;assurer qu&#8217;il s&#8217;agit de la m√™me adresse qu&#8217;ils ont vue sur votre site Web, sur votre e-mail et sur votre d√©pliant. Dans le cas d&#8217;une adresse al√©atoire comme 1J7mdg5rbQyUHENYdx39WVWK7fsLpEoXZy, l&#8217;utilisateur moyen inspectera peut-√™tre les premiers caract√®res "1J7mdg" et sera satisfait que l&#8217;adresse corresponde. √Ä l&#8217;aide d&#8217;un g√©n√©rateur d&#8217;adresses personnalis√©es, une personne ayant l&#8217;intention de voler en substituant une adresse d&#8217;apparence similaire peut rapidement g√©n√©rer des adresses qui correspondent aux premiers caract√®res, comme indiqu√© dans <a href="#table_4-13">G√©n√©ration d&#8217;adresses personnalis√©es pour correspondre √† une adresse al√©atoire</a>.</p>
</div>
<table id="table_4-13" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 7. G√©n√©ration d&#8217;adresses personnalis√©es pour correspondre √† une adresse al√©atoire</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Adresse al√©atoire originale</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1J7mdg5rbQyUHENYdx39WVWK7fsLpEoXZy</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Vanit√© (correspondance √† 4 caract√®res)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1J7md1QqU4LpctBetHS2ZoyLV5d6dShhEy</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Vanit√© (correspondance √† 5 caract√®res)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1J7mdgYqyNd4ya3UEcq31Q7sqRMXw2XZ6n</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Vanit√© (correspondance √† 6 caract√®res)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1J7mdg5WxGENmwyJP9xuGhG5KRzu99BBCX</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Alors, une adresse personnalis√©e augmente-t-elle la s√©curit√©¬†? Si Eugenia g√©n√®re l&#8217;adresse personnalis√©e 1Kids33q44erFfpeXrmDSz7zEqG2FesZEN, les utilisateurs sont susceptibles de regarder le mot de mod√®le personnalis√© <em>et quelques caract√®res au-del√†</em>, par exemple en remarquant la partie "1Kids33" de l&#8217;adresse. Cela obligerait un attaquant √† g√©n√©rer une adresse de vanit√© correspondant √† au moins six caract√®res (deux de plus), en d√©ployant un effort 3 364 fois (58 √ó 58) sup√©rieur √† l&#8217;effort qu&#8217;Eugenia a d√©pens√© pour sa vanit√© √† 4 caract√®res. Essentiellement, l&#8217;effort qu&#8217;Eugenia d√©ploie (ou paie une vanit√© pour) "pousse" l&#8217;attaquant √† devoir produire une vanit√© de mod√®le plus longue. Si Eugenia paie un pool pour g√©n√©rer une adresse de vanit√© √† 8 caract√®res, l&#8217;attaquant serait pouss√© dans le domaine de 10 caract√®res, ce qui est irr√©alisable sur un ordinateur personnel et co√ªteux m√™me avec une plate-forme d&#8217;extraction de vanit√© personnalis√©e ou un pool de vanit√©. Ce qui est abordable pour Eugenia devient inabordable pour l&#8217;attaquant, surtout si la r√©compense potentielle de la fraude n&#8217;est pas assez √©lev√©e pour couvrir le co√ªt de la g√©n√©ration d&#8217;adresse personnalis√©e.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="paper_wallets">Portefeuilles en papier</h4>
<div class="paragraph">
<p> Les paper wallets, ou les portefeuilles en papier, sont des cl√©s priv√©es bitcoin imprim√©es sur papier. Souvent, le portefeuille papier comprend √©galement l&#8217;adresse Bitcoin correspondante pour plus de commodit√©, mais ce n&#8217;est pas n√©cessaire car elle peut √™tre d√©riv√©e de la cl√© priv√©e.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>Les portefeuilles en papier sont une technologie OBSOL√àTE et sont dangereux pour la plupart des utilisateurs. Il existe de nombreux pi√®ges subtils impliqu√©s dans leur g√©n√©ration, notamment la possibilit√© que le code de g√©n√©ration soit compromis par une "porte d√©rob√©e". Des centaines de bitcoins ont √©t√© vol√©s de cette fa√ßon. Les portefeuilles en papier sont pr√©sent√©s ici √† titre informatif uniquement et ne doivent pas √™tre utilis√©s pour stocker des bitcoins. Utilisez une phrase mn√©monique BIP-39 pour sauvegarder vos cl√©s. Utilisez un portefeuille mat√©riel pour stocker des cl√©s et signer des transactions. N&#8217;UTILISEZ PAS DE PORTEFEUILLES EN PAPIER.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Les portefeuilles en papier se pr√©sentent sous de nombreuses formes, tailles et conceptions, mais √† un niveau tr√®s basique, il ne s&#8217;agit que d&#8217;une cl√© et d&#8217;une adresse imprim√©es sur papier. <a href="#table_4-14">La forme la plus simple d&#8217;un portefeuille papier - une impression de l&#8217;adresse Bitcoin et de la cl√© priv√©e</a> montre la forme la plus simple d&#8217;un portefeuille en papier.</p>
</div>
<table id="table_4-14" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 8. La forme la plus simple d&#8217;un portefeuille papier - une impression de l&#8217;adresse Bitcoin et de la cl√© priv√©e</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Adresse publique</th>
<th class="tableblock halign-left valign-top">Cl√© priv√©e (WIF)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1424C2F4bC9JidNjjTUZCbUxv6Sa1Mt62x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5J3mBbAH58CpQ3Y5RNJpUKPE62SQ5tfcvU2JpbnkeyhfsYB1Jcn</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Les portefeuilles en papier sont disponibles dans de nombreux mod√®les et tailles, avec de nombreuses fonctionnalit√©s diff√©rentes. <a href="#paper_wallet_simple">Un exemple de portefeuille en papier simple</a> montre un exemple de portefeuille en papier.</p>
</div>
<div id="paper_wallet_simple" class="imageblock">
<div class="content">
<img src="images/mbc2_0408.png" alt="mbc2 0408">
</div>
<div class="title">Figure 8. Un exemple de portefeuille en papier simple</div>
</div>
<div class="paragraph">
<p>Certains sont destin√©s √† √™tre offerts en cadeau et ont des th√®mes saisonniers, tels que les th√®mes de No√´l et du Nouvel An. D&#8217;autres sont con√ßus pour √™tre stock√©s dans un coffre-fort de banque ou un coffre-fort avec la cl√© priv√©e cach√©e d&#8217;une mani√®re ou d&#8217;une autre, soit avec des autocollants opaques √† gratter, soit pli√©s et scell√©s avec une feuille adh√©sive inviolable.</p>
</div>
<div class="paragraph">
<p>D&#8217;autres conceptions comportent des copies suppl√©mentaires de la cl√© et de l&#8217;adresse, sous la forme de talons d√©tachables similaires aux talons de ticket, vous permettant de stocker plusieurs copies pour vous prot√©ger contre les incendies, les inondations ou d&#8217;autres catastrophes naturelles.</p>
</div>
<div id="paper_wallet_spw" class="imageblock">
<div class="content">
<img src="images/mbc2_0412.png" alt="mbc2 0412">
</div>
<div class="title">Figure 9. Un exemple de portefeuille papier avec des copies suppl√©mentaires des cl√©s sur un "talon" de sauvegarde</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2022-03-23 22:28:05 -0400
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains("stemblock")) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>